<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 3.1.1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="../../../markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../markbind/css/bootstrap-vue.min.css">
    <link rel="stylesheet" href="../../../markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../../../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="../../../markbind/css/octicons.css">
    <link rel="stylesheet" href="../../../markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="../../../markbind/css/codeblock-dark.min.css"><link rel="stylesheet" href="../../../markbind/css/markbind.min.css"><script src="../../../markbind/js/polyfill.min.js"></script>
    <script src="../../../markbind/js/vue.min.js"></script>
    <script src="../../../markbind/js/markbind.min.js"></script>
    <script src="README-zh-Hans.page-vue-render.js"></script>
    <script src="../../../markbind/js/jquery.min.js"></script><link rel="stylesheet" href="https:/mazx4960.github.io/system-design-primer/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css">
    
  <link rel="stylesheet" href="https://mazx4960.github.io/system-design-primer//stylesheets/main.css">
</head>
<script>
  const baseUrl = 'https://mazx4960.github.io/system-design-primer/'
</script>
<body >
<div id="app" data-server-rendered="true"><header fixed=""><div data-v-15113a2f><nav class="navbar navbar-expand-md navbar-dark bg-dark" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="https://mazx4960.github.io/system-design-primer//index.html" title="Home" class="navbar-brand" data-v-15113a2f>System Design Primer</a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav mr-auto mt-2 mt-lg-0" data-v-15113a2f> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" class="dropdown-toggle" data-v-2e98b3f0>Solutions</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/mint/README.html" class="dropdown-item" data-v-2e98b3f0>mint</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/pastebin/README.html" class="dropdown-item" data-v-2e98b3f0>pastebin</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/query_cache/README.html" class="dropdown-item" data-v-2e98b3f0>query_cache</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/sales_rank/README.html" class="dropdown-item" data-v-2e98b3f0>sales_rank</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/scaling_aws/README.html" class="dropdown-item" data-v-2e98b3f0>scaling_aws</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/social_graph/README.html" class="dropdown-item" data-v-2e98b3f0>social_graph</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/twitter/README.html" class="dropdown-item" data-v-2e98b3f0>twitter</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer//solutions/system_design/web_crawler/README.html" class="dropdown-item" data-v-2e98b3f0>web_crawler</a></li></ul></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><form class="navbar-form" data-v-15113a2f><div style="position:relative;"><input type="text" placeholder="Search" autocomplete="off" value="" class="form-control"> <ul class="dropdown-menu search-dropdown-menu dropdown-menu-right"></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" class="fixed-header-padding" data-v-e8c82f88><div class="site-nav-top" data-v-e8c82f88><div class="font-weight-bold mb-2" style="font-size:1.25rem;" data-v-e8c82f88>Topics</div></div> <div class="nav-component slim-scroll" data-v-e8c82f88><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Preface

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Motivation.html" data-v-e8c82f88>Motivation</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Ankiflashcards.html" data-v-e8c82f88>Anki flashcards</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Indexof-system-design-topics.html" data-v-e8c82f88>Index</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Studyguide.html" data-v-e8c82f88>Study Guide</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Interview Questions

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Howto-approach-a-system-design-interview-question.html" data-v-e8c82f88>How to approach a system design interview question</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Object-orienteddesign-interview-questions-with-solutions.html" data-v-e8c82f88>OOP interview questions</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Systemdesign-interview-questions-with-solutions.html" data-v-e8c82f88>System design interview questions</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Systemdesign-topics-start-here.html" data-v-e8c82f88>System design topics</a> <i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Performancevs-scalability.html" data-v-e8c82f88>Performance vs scalability</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Latencyvs-throughput.html" data-v-e8c82f88>Latency vs throughput</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Availabilityvs-consistency.html" data-v-e8c82f88>Availability vs consistency</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Consistencypatterns.html" data-v-e8c82f88>Consistency patterns</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Availabilitypatterns.html" data-v-e8c82f88>Availability patterns</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Domainname-system.html" data-v-e8c82f88>Domain name system</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Contentdelivery-network.html" data-v-e8c82f88>Content delivery network</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Loadbalancer.html" data-v-e8c82f88>Load balancer</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Reverseproxy-(web-server).html" data-v-e8c82f88>Reverse proxy (web server)</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Applicationlayer.html" data-v-e8c82f88>Application layer</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Database.html" data-v-e8c82f88>Database</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Cache.html" data-v-e8c82f88>Cache</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Asynchronism.html" data-v-e8c82f88>Asynchronism</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Communication.html" data-v-e8c82f88>Communication</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Security.html" data-v-e8c82f88>Security</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Misc

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Appendix.html" data-v-e8c82f88>Appendix</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Underdevelopment.html" data-v-e8c82f88>Under development</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Credits.html" data-v-e8c82f88>Credits</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Contactinfo.html" data-v-e8c82f88>Contact info</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/Contributing.html" data-v-e8c82f88>Contributing</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer//contents/License.html" data-v-e8c82f88>License</a></div></li></ul></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper" class="fixed-header-padding"><h1 id="">设计一个网页爬虫</h1> <p><strong>注意：这个文档中的链接会直接指向<a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%BB%E9%A2%98%E7%9A%84%E7%B4%A2%E5%BC%95">系统设计主题索引</a>中的有关部分，以避免重复的内容。你可以参考链接的相关内容，来了解其总的要点、方案的权衡取舍以及可选的替代方案。</strong></p> <h2 id="-2"><span id="-2" class="anchor"></span>第一步：简述用例与约束条件<a href="#-2" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <blockquote><p>把所有需要的东西聚集在一起，审视问题。不停的提问，以至于我们可以明确使用场景和约束。讨论假设。</p></blockquote> <p>我们将在没有面试官明确说明问题的情况下，自己定义一些用例以及限制条件。</p> <h3 id="-3"><span id="-3" class="anchor"></span>用例<a href="#-3" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <h4 id="-4"><span id="-4" class="anchor"></span>我们把问题限定在仅处理以下用例的范围中<a href="#-4" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <ul><li><strong>服务</strong> 抓取一系列链接：
<ul><li>生成包含搜索词的网页倒排索引</li> <li>生成页面的标题和摘要信息
<ul><li>页面标题和摘要都是静态的，它们不会根据搜索词改变</li></ul></li></ul></li> <li><strong>用户</strong> 输入搜索词后，可以看到相关的搜索结果列表，列表每一项都包含由网页爬虫生成的页面标题及摘要
<ul><li>只给该用例绘制出概要组件和交互说明，无需讨论细节</li></ul></li> <li><strong>服务</strong> 具有高可用性</li></ul> <h4 id="-5"><span id="-5" class="anchor"></span>无需考虑<a href="#-5" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <ul><li>搜索分析</li> <li>个性化搜索结果</li> <li>页面排名</li></ul> <h3 id="-6"><span id="-6" class="anchor"></span>限制条件与假设<a href="#-6" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <h4 id="-7"><span id="-7" class="anchor"></span>提出假设<a href="#-7" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <ul><li>搜索流量分布不均
<ul><li>有些搜索词非常热门，有些则非常冷门</li></ul></li> <li>只支持匿名用户</li> <li>用户很快就能看到搜索结果</li> <li>网页爬虫不应该陷入死循环
<ul><li>当爬虫路径包含环的时候，将会陷入死循环</li></ul></li> <li>抓取 10 亿个链接
<ul><li>要定期重新抓取页面以确保新鲜度</li> <li>平均每周重新抓取一次，网站越热门，那么重新抓取的频率越高
<ul><li>每月抓取 40 亿个链接</li></ul></li> <li>每个页面的平均存储大小：500 KB
<ul><li>简单起见，重新抓取的页面算作新页面</li></ul></li></ul></li> <li>每月搜索量 1000 亿次</li></ul> <p>用更传统的系统来练习 —— 不要使用 <a href="http://lucene.apache.org/solr/">solr</a> 、<a href="http://nutch.apache.org/">nutch</a> 之类的现成系统。</p> <h4 id="-8"><span id="-8" class="anchor"></span>计算用量<a href="#-8" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p><strong>如果你需要进行粗略的用量计算，请向你的面试官说明。</strong></p> <ul><li>每月存储 2 PB 页面
<ul><li>每月抓取 40 亿个页面，每个页面 500 KB</li> <li>三年存储 72 PB 页面</li></ul></li> <li>每秒 1600 次写请求</li> <li>每秒 40000 次搜索请求</li></ul> <p>简便换算指南：</p> <ul><li>一个月有 250 万秒</li> <li>每秒 1 个请求，即每月 250 万个请求</li> <li>每秒 40 个请求，即每月 1 亿个请求</li> <li>每秒 400 个请求，即每月 10 亿个请求</li></ul> <h2 id="-9"><span id="-9" class="anchor"></span>第二步： 概要设计<a href="#-9" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <blockquote><p>列出所有重要组件以规划概要设计。</p></blockquote> <p><a href="http://i.imgur.com/xjdAAUv.png" target="_self"><img src="http://i.imgur.com/xjdAAUv.png" alt="" class="img-fluid"></a></p> <h2 id="-10"><span id="-10" class="anchor"></span>第三步：设计核心组件<a href="#-10" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <blockquote><p>对每一个核心组件进行详细深入的分析。</p></blockquote> <h3 id="-11"><span id="-11" class="anchor"></span>用例：爬虫服务抓取一系列网页<a href="#-11" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>假设我们有一个初始列表 <code class="hljs inline no-lang">links_to_crawl</code>（待抓取链接），它最初基于网站整体的知名度来排序。当然如果这个假设不合理，我们可以使用 <a href="https://www.yahoo.com/">Yahoo</a>、<a href="http://www.dmoz.org/">DMOZ</a> 等知名门户网站作为种子链接来进行扩散 。</p> <p>我们将用表 <code class="hljs inline no-lang">crawled_links</code> （已抓取链接 ）来记录已经处理过的链接以及相应的页面签名。</p> <p>我们可以将 <code class="hljs inline no-lang">links_to_crawl</code> 和 <code class="hljs inline no-lang">crawled_links</code> 记录在键-值型 <strong>NoSQL 数据库</strong>中。对于 <code class="hljs inline no-lang">crawled_links</code> 中已排序的链接，我们可以使用 <a href="https://redis.io/">Redis</a> 的有序集合来维护网页链接的排名。我们应当在 <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#sql-%E8%BF%98%E6%98%AF-nosql">选择 SQL 还是 NoSQL 的问题上，讨论有关使用场景以及利弊 </a>。</p> <ul><li><strong>爬虫服务</strong>按照以下流程循环处理每一个页面链接：
<ul><li>选取排名最靠前的待抓取链接
<ul><li>在  <strong>NoSQL 数据库</strong>的 <code class="hljs inline no-lang">crawled_links</code> 中，检查待抓取页面的签名是否与某个已抓取页面的签名相似
<ul><li>若存在，则降低该页面链接的优先级
<ul><li>这样做可以避免陷入死循环</li> <li>继续（进入下一次循环）</li></ul></li> <li>若不存在，则抓取该链接
<ul><li>在<strong>倒排索引服务</strong>任务队列中，新增一个生成<a href="https://en.wikipedia.org/wiki/Search_engine_indexing">倒排索引</a>任务。</li> <li>在<strong>文档服务</strong>任务队列中，新增一个生成静态标题和摘要的任务。</li> <li>生成页面签名</li> <li>在 <strong>NoSQL 数据库</strong>的 <code class="hljs inline no-lang">links_to_crawl</code> 中删除该链接</li> <li>在 <strong>NoSQL 数据库</strong>的 <code class="hljs inline no-lang">crawled_links</code> 中插入该链接以及页面签名</li></ul></li></ul></li></ul></li></ul></li></ul> <p><strong>向面试官了解你需要写多少代码</strong>。</p> <p><code class="hljs inline no-lang">PagesDataStore</code> 是<strong>爬虫服务</strong>中的一个抽象类，它使用 <strong>NoSQL 数据库</strong>进行存储。</p> <pre><code class="hljs python"><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PagesDataStore</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, db</span>);</span>
</span><span><span class="hljs-function">        <span class="hljs-title">self</span>.<span class="hljs-title">db</span> = <span class="hljs-title">db</span></span>
</span><span><span class="hljs-function">        ...</span>
</span><span><span class="hljs-function"></span>
</span><span><span class="hljs-function">    <span class="hljs-title">def</span> <span class="hljs-title">add_link_to_crawl</span>(<span class="hljs-params">self, url</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;将指定链接加入 `links_to_crawl`。&quot;&quot;&quot;</span>
</span><span>        ...
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove_link_to_crawl</span>(<span class="hljs-params">self, url</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;从 `links_to_crawl` 中删除指定链接。&quot;&quot;&quot;</span>
</span><span>        ...
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reduce_priority_link_to_crawl</span>(<span class="hljs-params">self, url</span>)</span>
</span><span><span class="hljs-function">        &quot;&quot;&quot;在 `<span class="hljs-title">links_to_crawl</span>` 中降低一个链接的优先级以避免死循环。&quot;&quot;&quot;</span>
</span><span><span class="hljs-function">        ...</span>
</span><span><span class="hljs-function"></span>
</span><span><span class="hljs-function">    <span class="hljs-title">def</span> <span class="hljs-title">extract_max_priority_page</span>(<span class="hljs-params">self</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;返回 `links_to_crawl` 中优先级最高的链接。&quot;&quot;&quot;</span>
</span><span>        ...
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">insert_crawled_link</span>(<span class="hljs-params">self, url, signature</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;将指定链接加入 `crawled_links`。&quot;&quot;&quot;</span>
</span><span>        ...
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">crawled_similar</span>(<span class="hljs-params">self, signature</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;判断待抓取页面的签名是否与某个已抓取页面的签名相似。&quot;&quot;&quot;</span>
</span><span>        ...
</span></code></pre><p><code class="hljs inline no-lang">Page</code> 是<strong>爬虫服务</strong>的一个抽象类，它封装了网页对象，由页面链接、页面内容、子链接和页面签名构成。</p> <pre><code class="hljs python"><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Page</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, url, contents, child_urls, signature</span>):</span>
</span><span>        self.url = url
</span><span>        self.contents = contents
</span><span>        self.child_urls = child_urls
</span><span>        self.signature = signature
</span></code></pre><p><code class="hljs inline no-lang">Crawler</code> 是<strong>爬虫服务</strong>的主类，由<code class="hljs inline no-lang">Page</code> 和 <code class="hljs inline no-lang">PagesDataStore</code> 组成。</p> <pre><code class="hljs python"><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Crawler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span>
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, data_store, reverse_index_queue, doc_index_queue</span>):</span>
</span><span>        self.data_store = data_store
</span><span>        self.reverse_index_queue = reverse_index_queue
</span><span>        self.doc_index_queue = doc_index_queue
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_signature</span>(<span class="hljs-params">self, page</span>):</span>
</span><span>        <span class="hljs-string">&quot;&quot;&quot;基于页面链接与内容生成签名。&quot;&quot;&quot;</span>
</span><span>        ...
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">crawl_page</span>(<span class="hljs-params">self, page</span>):</span>
</span><span>        <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> page.child_urls:
</span><span>            self.data_store.add_link_to_crawl(url)
</span><span>        page.signature = self.create_signature(page)
</span><span>        self.data_store.remove_link_to_crawl(page.url)
</span><span>        self.data_store.insert_crawled_link(page.url, page.signature)
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">crawl</span>(<span class="hljs-params">self</span>):</span>
</span><span>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
</span><span>            page = self.data_store.extract_max_priority_page()
</span><span>            <span class="hljs-keyword">if</span> page <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
</span><span>                <span class="hljs-keyword">break</span>
</span><span>            <span class="hljs-keyword">if</span> self.data_store.crawled_similar(page.signature):
</span><span>                self.data_store.reduce_priority_link_to_crawl(page.url)
</span><span>            <span class="hljs-keyword">else</span>:
</span><span>                self.crawl_page(page)
</span></code></pre><h3 id="-12"><span id="-12" class="anchor"></span>处理重复内容<a href="#-12" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>我们要谨防网页爬虫陷入死循环，这通常会发生在爬虫路径中存在环的情况。</p> <p><strong>向面试官了解你需要写多少代码</strong>.</p> <p>删除重复链接：</p> <ul><li>假设数据量较小，我们可以用类似于 <code class="hljs inline no-lang">sort | unique</code> 的方法。（译注： 先排序，后去重）</li> <li>假设有 10 亿条数据，我们应该使用 <strong>MapReduce</strong> 来输出只出现 1 次的记录。</li></ul> <pre><code class="hljs python"><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RemoveDuplicateUrls</span>(<span class="hljs-params">MRJob</span>):</span>
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mapper</span>(<span class="hljs-params">self, _, line</span>):</span>
</span><span>        <span class="hljs-keyword">yield</span> line, <span class="hljs-number">1</span>
</span><span>
</span><span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">self, key, values</span>):</span>
</span><span>        total = <span class="hljs-built_in">sum</span>(values)
</span><span>        <span class="hljs-keyword">if</span> total == <span class="hljs-number">1</span>:
</span><span>            <span class="hljs-keyword">yield</span> key, total
</span></code></pre><p>比起处理重复内容，检测重复内容更为复杂。我们可以基于网页内容生成签名，然后对比两者签名的相似度。可能会用到的算法有 <a href="https://en.wikipedia.org/wiki/Jaccard_index">Jaccard index</a> 以及 <a href="https://en.wikipedia.org/wiki/Cosine_similarity">cosine similarity</a>。</p> <h3 id="-13"><span id="-13" class="anchor"></span>抓取结果更新策略<a href="#-13" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>要定期重新抓取页面以确保新鲜度。抓取结果应该有个 <code class="hljs inline no-lang">timestamp</code> 字段记录上一次页面抓取时间。每隔一段时间，比如说 1 周，所有页面都需要更新一次。对于热门网站或是内容频繁更新的网站，爬虫抓取间隔可以缩短。</p> <p>尽管我们不会深入网页数据分析的细节，我们仍然要做一些数据挖掘工作来确定一个页面的平均更新时间，并且根据相关的统计数据来决定爬虫的重新抓取频率。</p> <p>当然我们也应该根据站长提供的 <code class="hljs inline no-lang">Robots.txt</code> 来控制爬虫的抓取频率。</p> <h3 id="-14"><span id="-14" class="anchor"></span>用例：用户输入搜索词后，可以看到相关的搜索结果列表，列表每一项都包含由网页爬虫生成的页面标题及摘要<a href="#-14" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><strong>客户端</strong>向运行<a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86web-%E6%9C%8D%E5%8A%A1%E5%99%A8">反向代理</a>的 <strong>Web 服务器</strong>发送一个请求</li> <li><strong>Web 服务器</strong> 发送请求到 <strong>Query API</strong> 服务器</li> <li><strong>查询 API</strong> 服务将会做这些事情：
<ul><li>解析查询参数
<ul><li>删除 HTML 标记</li> <li>将文本分割成词组 （译注： 分词处理）</li> <li>修正错别字</li> <li>规范化大小写</li> <li>将搜索词转换为布尔运算</li></ul></li> <li>使用<strong>倒排索引服务</strong>来查找匹配查询的文档
<ul><li><strong>倒排索引服务</strong>对匹配到的结果进行排名，然后返回最符合的结果</li></ul></li> <li>使用<strong>文档服务</strong>返回文章标题与摘要</li></ul></li></ul> <p>我们使用  <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%A1%A8%E8%BF%B0%E6%80%A7%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BBrest"><strong>REST API</strong></a> 与客户端通信：</p> <pre><code class="hljs"><span>$ curl https://search.com/api/v1/search?query=hello+world
</span></code></pre><p>响应内容:</p> <pre><code class="hljs"><span>{
</span><span>    &quot;title&quot;: &quot;foo's title&quot;,
</span><span>    &quot;snippet&quot;: &quot;foo's snippet&quot;,
</span><span>    &quot;link&quot;: &quot;https://foo.com&quot;,
</span><span>},
</span><span>{
</span><span>    &quot;title&quot;: &quot;bar's title&quot;,
</span><span>    &quot;snippet&quot;: &quot;bar's snippet&quot;,
</span><span>    &quot;link&quot;: &quot;https://bar.com&quot;,
</span><span>},
</span><span>{
</span><span>    &quot;title&quot;: &quot;baz's title&quot;,
</span><span>    &quot;snippet&quot;: &quot;baz's snippet&quot;,
</span><span>    &quot;link&quot;: &quot;https://baz.com&quot;,
</span><span>},
</span></code></pre><p>对于服务器内部通信，我们可以使用 <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E5%8D%8F%E8%AE%AErpc">远程过程调用协议（RPC）</a></p> <h2 id="-15"><span id="-15" class="anchor"></span>第四步：架构扩展<a href="#-15" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <blockquote><p>根据限制条件，找到并解决瓶颈。</p></blockquote> <p><a href="http://i.imgur.com/bWxPtQA.png" target="_self"><img src="http://i.imgur.com/bWxPtQA.png" alt="" class="img-fluid"></a></p> <p><strong>重要提示：不要直接从最初设计跳到最终设计！</strong></p> <p>现在你要 1) <strong>基准测试、负载测试</strong>。2) <strong>分析、描述</strong>性能瓶颈。3) 在解决瓶颈问题的同时，评估替代方案、权衡利弊。4) 重复以上步骤。请阅读<a href="/mazx4960.github.io/system-design-primer/solutions/system_design/scaling_aws/README.html">设计一个系统，并将其扩大到为数以百万计的 AWS 用户服务</a> 来了解如何逐步扩大初始设计。</p> <p>讨论初始设计可能遇到的瓶颈及相关解决方案是很重要的。例如加上一套配备多台 <strong>Web 服务器</strong>的<strong>负载均衡器</strong>是否能够解决问题？<strong>CDN</strong>呢？<strong>主从复制</strong>呢？它们各自的替代方案和需要<strong>权衡</strong>的利弊又有哪些呢？</p> <p>我们将会介绍一些组件来完成设计，并解决架构规模扩张问题。内置的负载均衡器将不做讨论以节省篇幅。</p> <p><strong>为了避免重复讨论</strong>，请参考<a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%BB%E9%A2%98%E7%9A%84%E7%B4%A2%E5%BC%95">系统设计主题索引</a>相关部分来了解其要点、方案的权衡取舍以及替代方案。</p> <ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F">DNS</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%99%A8">负载均衡器</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%B0%B4%E5%B9%B3%E6%89%A9%E5%B1%95">水平扩展</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86web-%E6%9C%8D%E5%8A%A1%E5%99%A8">Web 服务器（反向代理）</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BA%94%E7%94%A8%E5%B1%82">API 服务器（应用层）</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%BC%93%E5%AD%98">缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#nosql">NoSQL</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%B8%80%E8%87%B4%E6%80%A7%E6%A8%A1%E5%BC%8F">一致性模式</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%8F%AF%E7%94%A8%E6%80%A7%E6%A8%A1%E5%BC%8F">可用性模式</a></li></ul> <p>有些搜索词非常热门，有些则非常冷门。热门的搜索词可以通过诸如 Redis 或者 Memcached 之类的<strong>内存缓存</strong>来缩短响应时间，避免<strong>倒排索引服务</strong>以及<strong>文档服务</strong>过载。<strong>内存缓存</strong>同样适用于流量分布不均匀以及流量短时高峰问题。从内存中读取 1 MB  连续数据大约需要 250 微秒，而从 SSD 读取同样大小的数据要花费 4 倍的时间，从机械硬盘读取需要花费 80 倍以上的时间。<sup><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#每个程序员都应该知道的延迟数">1</a></sup></p> <p>以下是优化<strong>爬虫服务</strong>的其他建议：</p> <ul><li>为了处理数据大小问题以及网络请求负载，<strong>倒排索引服务</strong>和<strong>文档服务</strong>可能需要大量应用数据分片和数据复制。</li> <li>DNS 查询可能会成为瓶颈，<strong>爬虫服务</strong>最好专门维护一套定期更新的 DNS 查询服务。</li> <li>借助于<a href="https://en.wikipedia.org/wiki/Connection_pool">连接池</a>，即同时维持多个开放网络连接，可以提升<strong>爬虫服务</strong>的性能并减少内存使用量。
<ul><li>改用 <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEudp">UDP</a> 协议同样可以提升性能</li></ul></li> <li>网络爬虫受带宽影响较大，请确保带宽足够维持高吞吐量。</li></ul> <h2 id="-16"><span id="-16" class="anchor"></span>其它要点<a href="#-16" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <blockquote><p>是否深入这些额外的主题，取决于你的问题范围和剩下的时间。</p></blockquote> <h3 id="sql"><span id="sql" class="anchor"></span>SQL 扩展模式<a href="#sql" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6">读取复制</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%81%94%E5%90%88">联合</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%86%E7%89%87">分片</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E9%9D%9E%E8%A7%84%E8%8C%83%E5%8C%96">非规范化</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#sql-%E8%B0%83%E4%BC%98">SQL 调优</a></li></ul> <h4 id="nosql"><span id="nosql" class="anchor"></span>NoSQL<a href="#nosql" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E9%94%AE-%E5%80%BC%E5%AD%98%E5%82%A8">键-值存储</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%96%87%E6%A1%A3%E7%B1%BB%E5%9E%8B%E5%AD%98%E5%82%A8">文档类型存储</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%97%E5%9E%8B%E5%AD%98%E5%82%A8">列型存储</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93">图数据库</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#sql-%E8%BF%98%E6%98%AF-nosql">SQL vs NoSQL</a></li></ul> <h3 id="-17"><span id="-17" class="anchor"></span>缓存<a href="#-17" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>在哪缓存
<ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%BC%93%E5%AD%98">客户端缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#cdn-%E7%BC%93%E5%AD%98">CDN 缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%93%E5%AD%98">Web 服务器缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%93%E5%AD%98">数据库缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BA%94%E7%94%A8%E7%BC%93%E5%AD%98">应用缓存</a></li></ul></li> <li>什么需要缓存
<ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E7%BA%A7%E5%88%AB%E7%9A%84%E7%BC%93%E5%AD%98">数据库查询级别的缓存</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AF%B9%E8%B1%A1%E7%BA%A7%E5%88%AB%E7%9A%84%E7%BC%93%E5%AD%98">对象级别的缓存</a></li></ul></li> <li>何时更新缓存
<ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%BC%93%E5%AD%98%E6%A8%A1%E5%BC%8F">缓存模式</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%9B%B4%E5%86%99%E6%A8%A1%E5%BC%8F">直写模式</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9B%9E%E5%86%99%E6%A8%A1%E5%BC%8F">回写模式</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%B7%E6%96%B0">刷新</a></li></ul></li></ul> <h3 id="-18"><span id="-18" class="anchor"></span>异步与微服务<a href="#-18" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97">消息队列</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97">任务队列</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%83%8C%E5%8E%8B">背压</a></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BE%AE%E6%9C%8D%E5%8A%A1">微服务</a></li></ul> <h3 id="-19"><span id="-19" class="anchor"></span>通信<a href="#-19" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>可权衡选择的方案：
<ul><li>与客户端的外部通信 - <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%A1%A8%E8%BF%B0%E6%80%A7%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BBrest">使用 REST 作为 HTTP API</a></li> <li>内部通信 - <a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E5%8D%8F%E8%AE%AErpc">RPC</a></li></ul></li> <li><a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0">服务发现</a></li></ul> <h3 id="-20"><span id="-20" class="anchor"></span>安全性<a href="#-20" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>请参阅<a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AE%89%E5%85%A8">安全</a>。</p> <h3 id="-21"><span id="-21" class="anchor"></span>延迟数值<a href="#-21" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>请参阅<a href="https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%AF%8F%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E5%BB%B6%E8%BF%9F%E6%95%B0">每个程序员都应该知道的延迟数</a>。</p> <h3 id="-22"><span id="-22" class="anchor"></span>持续探讨<a href="#-22" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>持续进行基准测试并监控你的系统，以解决他们提出的瓶颈问题。</li> <li>架构扩展是一个迭代的过程。</li></ul> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88></div> <!----></nav></div> <footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 3.1.1</a>]</small></div></footer></div>
</body><script src="../../../markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
