
    var pageVueRenderFn = function anonymous(
) {
with(this){return _c('div',{attrs:{"id":"app"}},[_c('header',{attrs:{"fixed":""}},[_c('navbar',{attrs:{"type":"dark"},scopedSlots:_u([{key:"brand",fn:function(){return [_c('a',{staticClass:"navbar-brand",attrs:{"href":"https://mazx4960.github.io/system-design-primer//index.html","title":"Home"}},[_v("System Design Primer")])]},proxy:true},{key:"right",fn:function(){return [_c('li',[_c('form',{staticClass:"navbar-form"},[_c('searchbar',{attrs:{"data":searchData,"placeholder":"Search","on-hit":searchCallback,"menu-align-right":""}})],1)])]},proxy:true}])},[_v(" "),_c('dropdown',{staticClass:"nav-link",scopedSlots:_u([{key:"header",fn:function(){return [_v("Solutions")]},proxy:true}])},[_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/mint/readme.html"}},[_v("mint")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/pastebin/readme.html"}},[_v("pastebin")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/query_cache/readme.html"}},[_v("query_cache")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/sales_rank/readme.html"}},[_v("sales_rank")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/scaling_aws/readme.html"}},[_v("scaling_aws")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/social_graph/readme.html"}},[_v("social_graph")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/twitter/readme.html"}},[_v("twitter")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer//solutions/system_design/web_crawler/readme.html"}},[_v("web_crawler")])])])],1)],1),_v(" "),_c('div',{attrs:{"id":"flex-body"}},[_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"site-nav","tag-name":"nav","to":"site-nav"}},[_c('div',{staticClass:"site-nav-top"},[_c('div',{staticClass:"font-weight-bold mb-2",staticStyle:{"font-size":"1.25rem"}},[_v("Topics")])]),_v(" "),_c('div',{staticClass:"nav-component slim-scroll"},[_c('site-nav',[_c('overlay-source',{staticClass:"site-nav-list site-nav-list-root",attrs:{"tag-name":"ul","to":"mb-site-nav"}},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Preface\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Motivation.html"}},[_v("Motivation")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Ankiflashcards.html"}},[_v("Anki flashcards")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Indexof-system-design-topics.html"}},[_v("Index")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Studyguide.html"}},[_v("Study Guide")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Interview Questions\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Howto-approach-a-system-design-interview-question.html"}},[_v("How to approach a system design interview question")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Object-orienteddesign-interview-questions-with-solutions.html"}},[_v("OOP interview questions")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Systemdesign-interview-questions-with-solutions.html"}},[_v("System design interview questions")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Systemdesign-topics-start-here.html"}},[_v("System design topics")]),_v(" "),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Performancevs-scalability.html"}},[_v("Performance vs scalability")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Latencyvs-throughput.html"}},[_v("Latency vs throughput")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Availabilityvs-consistency.html"}},[_v("Availability vs consistency")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Consistencypatterns.html"}},[_v("Consistency patterns")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Availabilitypatterns.html"}},[_v("Availability patterns")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Domainname-system.html"}},[_v("Domain name system")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Contentdelivery-network.html"}},[_v("Content delivery network")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Loadbalancer.html"}},[_v("Load balancer")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Reverseproxy-(web-server).html"}},[_v("Reverse proxy (web server)")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Applicationlayer.html"}},[_v("Application layer")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Database.html"}},[_v("Database")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Cache.html"}},[_v("Cache")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Asynchronism.html"}},[_v("Asynchronism")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Communication.html"}},[_v("Communication")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Security.html"}},[_v("Security")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Misc\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Appendix.html"}},[_v("Appendix")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Underdevelopment.html"}},[_v("Under development")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Credits.html"}},[_v("Credits")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Contactinfo.html"}},[_v("Contact info")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/Contributing.html"}},[_v("Contributing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer//contents/License.html"}},[_v("License")])])])])])])],1)],1)]),_v(" "),_m(0),_v(" "),_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"page-nav","tag-name":"nav","to":"page-nav"}},[_c('div',{staticClass:"nav-component slim-scroll"},[_c('a',{pre:true,attrs:{"class":"navbar-brand page-nav-title","href":"#"}},[_v("Chapters of This Page")]),_v(" "),_c('overlay-source',{staticClass:"nav nav-pills flex-column my-0 small no-flex-wrap",attrs:{"id":"mb-page-nav","tag-name":"nav","to":"mb-page-nav"}},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#design-amazon-s-sales-rank-by-category-feature"}},[_v("Design Amazon's sales rank by category feature‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-1-outline-use-cases-and-constraints"}},[_v("Step 1: Outline use cases and constraints‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#use-cases"}},[_v("Use cases‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#constraints-and-assumptions"}},[_v("Constraints and assumptions‎")])]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-2-create-a-high-level-design"}},[_v("Step 2: Create a high level design‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-3-design-core-components"}},[_v("Step 3: Design core components‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#use-case-service-calculates-the-past-week-s-most-popular-products-by-category"}},[_v("Use case: Service calculates the past week's most popular products by category‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#use-case-user-views-the-past-week-s-most-popular-products-by-category"}},[_v("Use case: User views the past week's most popular products by category‎")])]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#step-4-scale-the-design"}},[_v("Step 4: Scale the design‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#additional-talking-points"}},[_v("Additional talking points‎")]),_v(" "),_c('nav',{staticClass:"nav nav-pills flex-column my-0 nested no-flex-wrap"},[_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#caching"}},[_v("Caching‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#asynchronism-and-microservices"}},[_v("Asynchronism and microservices‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#communications"}},[_v("Communications‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#security"}},[_v("Security‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#latency-numbers"}},[_v("Latency numbers‎")]),_v(" "),_c('a',{pre:true,attrs:{"class":"nav-link py-1","href":"#ongoing"}},[_v("Ongoing‎")])])])])],1)])],1),_v(" "),_m(1)])}
};
    var pageVueStaticRenderFns = [function anonymous(
) {
with(this){return _c('div',{staticClass:"fixed-header-padding",attrs:{"id":"content-wrapper"}},[_c('br'),_v(" "),_c('h1',{attrs:{"id":"design-amazon-s-sales-rank-by-category-feature"}},[_c('span',{staticClass:"anchor",attrs:{"id":"design-amazon-s-sales-rank-by-category-feature"}}),_v("Design Amazon's sales rank by category feature"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#design-amazon-s-sales-rank-by-category-feature","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_c('em',[_v("Note: This document links directly to relevant areas found in the "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#index-of-system-design-topics"}},[_v("system design topics")]),_v(" to avoid duplication.  Refer to the linked content for general talking points, tradeoffs, and alternatives.")])]),_v(" "),_c('h2',{attrs:{"id":"step-1-outline-use-cases-and-constraints"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-1-outline-use-cases-and-constraints"}}),_v("Step 1: Outline use cases and constraints"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-1-outline-use-cases-and-constraints","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("Gather requirements and scope the problem.\nAsk questions to clarify use cases and constraints.\nDiscuss assumptions.")])]),_v(" "),_c('p',[_v("Without an interviewer to address clarifying questions, we'll define some use cases and constraints.")]),_v(" "),_c('h3',{attrs:{"id":"use-cases"}},[_c('span',{staticClass:"anchor",attrs:{"id":"use-cases"}}),_v("Use cases"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#use-cases","onclick":"event.stopPropagation()"}})]),_v(" "),_c('h4',{attrs:{"id":"we-ll-scope-the-problem-to-handle-only-the-following-use-case"}},[_c('span',{staticClass:"anchor",attrs:{"id":"we-ll-scope-the-problem-to-handle-only-the-following-use-case"}}),_v("We'll scope the problem to handle only the following use case"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#we-ll-scope-the-problem-to-handle-only-the-following-use-case","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("Service")]),_v(" calculates the past week's most popular products by category")]),_v(" "),_c('li',[_c('strong',[_v("User")]),_v(" views the past week's most popular products by category")]),_v(" "),_c('li',[_c('strong',[_v("Service")]),_v(" has high availability")])]),_v(" "),_c('h4',{attrs:{"id":"out-of-scope"}},[_c('span',{staticClass:"anchor",attrs:{"id":"out-of-scope"}}),_v("Out of scope"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#out-of-scope","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("The general e-commerce site\n"),_c('ul',[_c('li',[_v("Design components only for calculating sales rank")])])])]),_v(" "),_c('h3',{attrs:{"id":"constraints-and-assumptions"}},[_c('span',{staticClass:"anchor",attrs:{"id":"constraints-and-assumptions"}}),_v("Constraints and assumptions"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#constraints-and-assumptions","onclick":"event.stopPropagation()"}})]),_v(" "),_c('h4',{attrs:{"id":"state-assumptions"}},[_c('span',{staticClass:"anchor",attrs:{"id":"state-assumptions"}}),_v("State assumptions"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#state-assumptions","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("Traffic is not evenly distributed")]),_v(" "),_c('li',[_v("Items can be in multiple categories")]),_v(" "),_c('li',[_v("Items cannot change categories")]),_v(" "),_c('li',[_v("There are no subcategories ie "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("foo/bar/baz")])]),_v(" "),_c('li',[_v("Results must be updated hourly\n"),_c('ul',[_c('li',[_v("More popular products might need to be updated more frequently")])])]),_v(" "),_c('li',[_v("10 million products")]),_v(" "),_c('li',[_v("1000 categories")]),_v(" "),_c('li',[_v("1 billion transactions per month")]),_v(" "),_c('li',[_v("100 billion read requests per month")]),_v(" "),_c('li',[_v("100:1 read to write ratio")])]),_v(" "),_c('h4',{attrs:{"id":"calculate-usage"}},[_c('span',{staticClass:"anchor",attrs:{"id":"calculate-usage"}}),_v("Calculate usage"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#calculate-usage","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_c('strong',[_v("Clarify with your interviewer if you should run back-of-the-envelope usage calculations.")])]),_v(" "),_c('ul',[_c('li',[_v("Size per transaction:\n"),_c('ul',[_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("created_at")]),_v(" - 5 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("product_id")]),_v(" - 8 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("category_id")]),_v(" - 4 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("seller_id")]),_v(" - 8 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("buyer_id")]),_v(" - 8 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("quantity")]),_v(" - 4 bytes")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("total_price")]),_v(" - 5 bytes")]),_v(" "),_c('li',[_v("Total: ~40 bytes")])])]),_v(" "),_c('li',[_v("40 GB of new transaction content per month\n"),_c('ul',[_c('li',[_v("40 bytes per transaction * 1 billion transactions per month")]),_v(" "),_c('li',[_v("1.44 TB of new transaction content in 3 years")]),_v(" "),_c('li',[_v("Assume most are new transactions instead of updates to existing ones")])])]),_v(" "),_c('li',[_v("400 transactions per second on average")]),_v(" "),_c('li',[_v("40,000 read requests per second on average")])]),_v(" "),_c('p',[_v("Handy conversion guide:")]),_v(" "),_c('ul',[_c('li',[_v("2.5 million seconds per month")]),_v(" "),_c('li',[_v("1 request per second = 2.5 million requests per month")]),_v(" "),_c('li',[_v("40 requests per second = 100 million requests per month")]),_v(" "),_c('li',[_v("400 requests per second = 1 billion requests per month")])]),_v(" "),_c('h2',{attrs:{"id":"step-2-create-a-high-level-design"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-2-create-a-high-level-design"}}),_v("Step 2: Create a high level design"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-2-create-a-high-level-design","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("Outline a high level design with all important components.")])]),_v(" "),_c('p',[_c('a',{attrs:{"href":"http://i.imgur.com/vwMa1Qu.png","target":"_self"}},[_c('img',{staticClass:"img-fluid",attrs:{"src":"http://i.imgur.com/vwMa1Qu.png","alt":""}})])]),_v(" "),_c('h2',{attrs:{"id":"step-3-design-core-components"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-3-design-core-components"}}),_v("Step 3: Design core components"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-3-design-core-components","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("Dive into details for each core component.")])]),_v(" "),_c('h3',{attrs:{"id":"use-case-service-calculates-the-past-week-s-most-popular-products-by-category"}},[_c('span',{staticClass:"anchor",attrs:{"id":"use-case-service-calculates-the-past-week-s-most-popular-products-by-category"}}),_v("Use case: Service calculates the past week's most popular products by category"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#use-case-service-calculates-the-past-week-s-most-popular-products-by-category","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("We could store the raw "),_c('strong',[_v("Sales API")]),_v(" server log files on a managed "),_c('strong',[_v("Object Store")]),_v(" such as Amazon S3, rather than managing our own distributed file system.")]),_v(" "),_c('p',[_c('strong',[_v("Clarify with your interviewer how much code you are expected to write")]),_v(".")]),_v(" "),_c('p',[_v("We'll assume this is a sample log entry, tab delimited:")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("timestamp   product_id  category_id    qty     total_price   seller_id    buyer_id\n")]),_c('span',[_v("t1          product1    category1      2       20.00         1            1\n")]),_c('span',[_v("t2          product1    category2      2       20.00         2            2\n")]),_c('span',[_v("t2          product1    category2      1       10.00         2            3\n")]),_c('span',[_v("t3          product2    category1      3        7.00         3            4\n")]),_c('span',[_v("t4          product3    category2      7        2.00         4            5\n")]),_c('span',[_v("t5          product4    category1      1        5.00         5            6\n")]),_c('span',[_v("...\n")])])]),_c('p',[_v("The "),_c('strong',[_v("Sales Rank Service")]),_v(" could use "),_c('strong',[_v("MapReduce")]),_v(", using the "),_c('strong',[_v("Sales API")]),_v(" server log files as input and writing the results to an aggregate table "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("sales_rank")]),_v(" in a "),_c('strong',[_v("SQL Database")]),_v(".  We should discuss the "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#sql-or-nosql"}},[_v("use cases and tradeoffs between choosing SQL or NoSQL")]),_v(".")]),_v(" "),_c('p',[_v("We'll use a multi-step "),_c('strong',[_v("MapReduce")]),_v(":")]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("Step 1")]),_v(" - Transform the data to "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("(category, product_id), sum(quantity)")])]),_v(" "),_c('li',[_c('strong',[_v("Step 2")]),_v(" - Perform a distributed sort")])]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("SalesRanker")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("MRJob")]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("within_past_week")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, timestamp")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"Return True if timestamp is within past week, False otherwise.\"\"\"")]),_v("\n")]),_c('span',[_v("        ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("mapper")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, _ line")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"Parse each log line, extract and transform relevant lines.")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        Emit key value pairs of the form:")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product1), 2")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, product1), 2")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, product1), 1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product2), 3")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, product3), 7")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product4), 1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        \"\"\"")]),_v("\n")]),_c('span',[_v("        timestamp, product_id, category_id, quantity, total_price, seller_id, \\\n")]),_c('span',[_v("            buyer_id = line.split("),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'\\t'")]),_v(")\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("if")]),_v(" self.within_past_week(timestamp):\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" (category_id, product_id), quantity\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("reducer")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, key, value")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"Sum values for each key.")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product1), 2")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, product1), 3")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product2), 3")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, product3), 7")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, product4), 1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        \"\"\"")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" key, "),_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("sum")]),_v("(values)\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("mapper_sort")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, key, value")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"Construct key to ensure proper sorting.")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        Transform key and value to the form:")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 2), product1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, 3), product1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 3), product2")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, 7), product3")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 1), product4")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        The shuffle/sort step of MapReduce will then do a")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        distributed sort on the keys, resulting in:")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 1), product4")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 2), product1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category1, 3), product2")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, 3), product1")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (category2, 7), product3")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        \"\"\"")]),_v("\n")]),_c('span',[_v("        category_id, product_id = key\n")]),_c('span',[_v("        quantity = value\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" (category_id, quantity), product_id\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("reducer_identity")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, key, value")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" key, value\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("steps")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"Run the map and reduce steps.\"\"\"")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("return")]),_v(" [\n")]),_c('span',[_v("            self.mr(mapper=self.mapper,\n")]),_c('span',[_v("                    reducer=self.reducer),\n")]),_c('span',[_v("            self.mr(mapper=self.mapper_sort,\n")]),_c('span',[_v("                    reducer=self.reducer_identity),\n")]),_c('span',[_v("        ]\n")])])]),_c('p',[_v("The result would be the following sorted list, which we could insert into the "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("sales_rank")]),_v(" table:")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("(category1, 1), product4\n")]),_c('span',[_v("(category1, 2), product1\n")]),_c('span',[_v("(category1, 3), product2\n")]),_c('span',[_v("(category2, 3), product1\n")]),_c('span',[_v("(category2, 7), product3\n")])])]),_c('p',[_v("The "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("sales_rank")]),_v(" table could have the following structure:")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("id int NOT NULL AUTO_INCREMENT\n")]),_c('span',[_v("category_id int NOT NULL\n")]),_c('span',[_v("total_sold int NOT NULL\n")]),_c('span',[_v("product_id int NOT NULL\n")]),_c('span',[_v("PRIMARY KEY(id)\n")]),_c('span',[_v("FOREIGN KEY(category_id) REFERENCES Categories(id)\n")]),_c('span',[_v("FOREIGN KEY(product_id) REFERENCES Products(id)\n")])])]),_c('p',[_v("We'll create an "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#use-good-indices"}},[_v("index")]),_v(" on "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("id ")]),_v(", "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("category_id")]),_v(", and "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("product_id")]),_v(" to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory.  Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer."),_c('sup',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#latency-numbers-every-programmer-should-know"}},[_v("1")])])]),_v(" "),_c('h3',{attrs:{"id":"use-case-user-views-the-past-week-s-most-popular-products-by-category"}},[_c('span',{staticClass:"anchor",attrs:{"id":"use-case-user-views-the-past-week-s-most-popular-products-by-category"}}),_v("Use case: User views the past week's most popular products by category"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#use-case-user-views-the-past-week-s-most-popular-products-by-category","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("The "),_c('strong',[_v("Client")]),_v(" sends a request to the "),_c('strong',[_v("Web Server")]),_v(", running as a "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#reverse-proxy-web-server"}},[_v("reverse proxy")])]),_v(" "),_c('li',[_v("The "),_c('strong',[_v("Web Server")]),_v(" forwards the request to the "),_c('strong',[_v("Read API")]),_v(" server")]),_v(" "),_c('li',[_v("The "),_c('strong',[_v("Read API")]),_v(" server reads from the "),_c('strong',[_v("SQL Database")]),_v(" "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("sales_rank")]),_v(" table")])]),_v(" "),_c('p',[_v("We'll use a public "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#representational-state-transfer-rest"}},[_c('strong',[_v("REST API")])]),_v(":")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("$ curl https://amazon.com/api/v1/popular?category_id=1234\n")])])]),_c('p',[_v("Response:")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("{\n")]),_c('span',[_v("    \"id\": \"100\",\n")]),_c('span',[_v("    \"category_id\": \"1234\",\n")]),_c('span',[_v("    \"total_sold\": \"100000\",\n")]),_c('span',[_v("    \"product_id\": \"50\",\n")]),_c('span',[_v("},\n")]),_c('span',[_v("{\n")]),_c('span',[_v("    \"id\": \"53\",\n")]),_c('span',[_v("    \"category_id\": \"1234\",\n")]),_c('span',[_v("    \"total_sold\": \"90000\",\n")]),_c('span',[_v("    \"product_id\": \"200\",\n")]),_c('span',[_v("},\n")]),_c('span',[_v("{\n")]),_c('span',[_v("    \"id\": \"75\",\n")]),_c('span',[_v("    \"category_id\": \"1234\",\n")]),_c('span',[_v("    \"total_sold\": \"80000\",\n")]),_c('span',[_v("    \"product_id\": \"3\",\n")]),_c('span',[_v("},\n")])])]),_c('p',[_v("For internal communications, we could use "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#remote-procedure-call-rpc"}},[_v("Remote Procedure Calls")]),_v(".")]),_v(" "),_c('h2',{attrs:{"id":"step-4-scale-the-design"}},[_c('span',{staticClass:"anchor",attrs:{"id":"step-4-scale-the-design"}}),_v("Step 4: Scale the design"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#step-4-scale-the-design","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("Identify and address bottlenecks, given the constraints.")])]),_v(" "),_c('p',[_c('a',{attrs:{"href":"http://i.imgur.com/MzExP06.png","target":"_self"}},[_c('img',{staticClass:"img-fluid",attrs:{"src":"http://i.imgur.com/MzExP06.png","alt":""}})])]),_v(" "),_c('p',[_c('strong',[_v("Important: Do not simply jump right into the final design from the initial design!")])]),_v(" "),_c('p',[_v("State you would 1) "),_c('strong',[_v("Benchmark/Load Test")]),_v(", 2) "),_c('strong',[_v("Profile")]),_v(" for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat.  See "),_c('a',{attrs:{"href":"/mazx4960.github.io/system-design-primer/solutions/system_design/scaling_aws/README.html"}},[_v("Design a system that scales to millions of users on AWS")]),_v(" as a sample on how to iteratively scale the initial design.")]),_v(" "),_c('p',[_v("It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them.  For example, what issues are addressed by adding a "),_c('strong',[_v("Load Balancer")]),_v(" with multiple "),_c('strong',[_v("Web Servers")]),_v("?  "),_c('strong',[_v("CDN")]),_v("?  "),_c('strong',[_v("Master-Slave Replicas")]),_v("?  What are the alternatives and "),_c('strong',[_v("Trade-Offs")]),_v(" for each?")]),_v(" "),_c('p',[_v("We'll introduce some components to complete the design and to address scalability issues.  Internal load balancers are not shown to reduce clutter.")]),_v(" "),_c('p',[_c('em',[_v("To avoid repeating discussions")]),_v(", refer to the following "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#index-of-system-design-topics"}},[_v("system design topics")]),_v(" for main talking points, tradeoffs, and alternatives:")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#domain-name-system"}},[_v("DNS")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#content-delivery-network"}},[_v("CDN")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#load-balancer"}},[_v("Load balancer")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#horizontal-scaling"}},[_v("Horizontal scaling")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#reverse-proxy-web-server"}},[_v("Web server (reverse proxy)")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#application-layer"}},[_v("API server (application layer)")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#cache"}},[_v("Cache")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#relational-database-management-system-rdbms"}},[_v("Relational database management system (RDBMS)")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#fail-over"}},[_v("SQL write master-slave failover")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#master-slave-replication"}},[_v("Master-slave replication")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#consistency-patterns"}},[_v("Consistency patterns")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#availability-patterns"}},[_v("Availability patterns")])])]),_v(" "),_c('p',[_v("The "),_c('strong',[_v("Analytics Database")]),_v(" could use a data warehousing solution such as Amazon Redshift or Google BigQuery.")]),_v(" "),_c('p',[_v("We might only want to store a limited time period of data in the database, while storing the rest in a data warehouse or in an "),_c('strong',[_v("Object Store")]),_v(".  An "),_c('strong',[_v("Object Store")]),_v(" such as Amazon S3 can comfortably handle the constraint of 40 GB of new content per month.")]),_v(" "),_c('p',[_v("To address the 40,000 "),_c('em',[_v("average")]),_v(" read requests per second (higher at peak), traffic for popular content (and their sales rank) should be handled by the "),_c('strong',[_v("Memory Cache")]),_v(" instead of the database.  The "),_c('strong',[_v("Memory Cache")]),_v(" is also useful for handling the unevenly distributed traffic and traffic spikes.  With the large volume of reads, the "),_c('strong',[_v("SQL Read Replicas")]),_v(" might not be able to handle the cache misses.  We'll probably need to employ additional SQL scaling patterns.")]),_v(" "),_c('p',[_v("400 "),_c('em',[_v("average")]),_v(" writes per second (higher at peak) might be tough for a single "),_c('strong',[_v("SQL Write Master-Slave")]),_v(", also pointing to a need for additional scaling techniques.")]),_v(" "),_c('p',[_v("SQL scaling patterns include:")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#federation"}},[_v("Federation")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#sharding"}},[_v("Sharding")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#denormalization"}},[_v("Denormalization")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#sql-tuning"}},[_v("SQL Tuning")])])]),_v(" "),_c('p',[_v("We should also consider moving some data to a "),_c('strong',[_v("NoSQL Database")]),_v(".")]),_v(" "),_c('h2',{attrs:{"id":"additional-talking-points"}},[_c('span',{staticClass:"anchor",attrs:{"id":"additional-talking-points"}}),_v("Additional talking points"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#additional-talking-points","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("Additional topics to dive into, depending on the problem scope and time remaining.")])]),_v(" "),_c('h4',{attrs:{"id":"nosql"}},[_c('span',{staticClass:"anchor",attrs:{"id":"nosql"}}),_v("NoSQL"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#nosql","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#key-value-store"}},[_v("Key-value store")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#document-store"}},[_v("Document store")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#wide-column-store"}},[_v("Wide column store")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#graph-database"}},[_v("Graph database")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#sql-or-nosql"}},[_v("SQL vs NoSQL")])])]),_v(" "),_c('h3',{attrs:{"id":"caching"}},[_c('span',{staticClass:"anchor",attrs:{"id":"caching"}}),_v("Caching"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#caching","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("Where to cache\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#client-caching"}},[_v("Client caching")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#cdn-caching"}},[_v("CDN caching")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#web-server-caching"}},[_v("Web server caching")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#database-caching"}},[_v("Database caching")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#application-caching"}},[_v("Application caching")])])])]),_v(" "),_c('li',[_v("What to cache\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#caching-at-the-database-query-level"}},[_v("Caching at the database query level")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#caching-at-the-object-level"}},[_v("Caching at the object level")])])])]),_v(" "),_c('li',[_v("When to update the cache\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#cache-aside"}},[_v("Cache-aside")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#write-through"}},[_v("Write-through")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#write-behind-write-back"}},[_v("Write-behind (write-back)")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#refresh-ahead"}},[_v("Refresh ahead")])])])])]),_v(" "),_c('h3',{attrs:{"id":"asynchronism-and-microservices"}},[_c('span',{staticClass:"anchor",attrs:{"id":"asynchronism-and-microservices"}}),_v("Asynchronism and microservices"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#asynchronism-and-microservices","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#message-queues"}},[_v("Message queues")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#task-queues"}},[_v("Task queues")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#back-pressure"}},[_v("Back pressure")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#microservices"}},[_v("Microservices")])])]),_v(" "),_c('h3',{attrs:{"id":"communications"}},[_c('span',{staticClass:"anchor",attrs:{"id":"communications"}}),_v("Communications"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#communications","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("Discuss tradeoffs:\n"),_c('ul',[_c('li',[_v("External communication with clients - "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#representational-state-transfer-rest"}},[_v("HTTP APIs following REST")])]),_v(" "),_c('li',[_v("Internal communications - "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#remote-procedure-call-rpc"}},[_v("RPC")])])])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#service-discovery"}},[_v("Service discovery")])])]),_v(" "),_c('h3',{attrs:{"id":"security"}},[_c('span',{staticClass:"anchor",attrs:{"id":"security"}}),_v("Security"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#security","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("Refer to the "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#security"}},[_v("security section")]),_v(".")]),_v(" "),_c('h3',{attrs:{"id":"latency-numbers"}},[_c('span',{staticClass:"anchor",attrs:{"id":"latency-numbers"}}),_v("Latency numbers"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#latency-numbers","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("See "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#latency-numbers-every-programmer-should-know"}},[_v("Latency numbers every programmer should know")]),_v(".")]),_v(" "),_c('h3',{attrs:{"id":"ongoing"}},[_c('span',{staticClass:"anchor",attrs:{"id":"ongoing"}}),_v("Ongoing"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#ongoing","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("Continue benchmarking and monitoring your system to address bottlenecks as they come up")]),_v(" "),_c('li',[_v("Scaling is an iterative process")])]),_v(" "),_c('i',{staticClass:"fa fa-arrow-circle-up fa-lg d-print-none",attrs:{"id":"scroll-top-button","onclick":"handleScrollTop()","aria-hidden":"true"}})])}
},function anonymous(
) {
with(this){return _c('footer',[_c('div',{staticClass:"text-center"},[_c('small',[_v("[Generated by "),_c('a',{attrs:{"href":"https://markbind.org/"}},[_v("MarkBind 3.1.1")]),_v("]")])])])}
}];
  