
    var pageVueRenderFn = function anonymous(
) {
with(this){return _c('div',{attrs:{"id":"app"}},[_c('header',{attrs:{"fixed":""}},[_c('navbar',{attrs:{"type":"dark"},scopedSlots:_u([{key:"brand",fn:function(){return [_c('a',{staticClass:"navbar-brand",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/index.html","title":"Home"}},[_v("System Design Primer")])]},proxy:true},{key:"right",fn:function(){return [_c('li',[_c('form',{staticClass:"navbar-form"},[_c('searchbar',{attrs:{"data":searchData,"placeholder":"Search","on-hit":searchCallback,"menu-align-right":""}})],1)])]},proxy:true}])},[_v(" "),_c('dropdown',{staticClass:"nav-link",scopedSlots:_u([{key:"header",fn:function(){return [_v("Solutions")]},proxy:true}])},[_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/mint/readme.html"}},[_v("mint")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/pastebin/readme.html"}},[_v("pastebin")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/query_cache/readme.html"}},[_v("query_cache")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/sales_rank/readme.html"}},[_v("sales_rank")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/scaling_aws/readme.html"}},[_v("scaling_aws")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/social_graph/readme.html"}},[_v("social_graph")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/twitter/readme.html"}},[_v("twitter")])]),_v(" "),_c('li',[_c('a',{staticClass:"dropdown-item",attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/web_crawler/readme.html"}},[_v("web_crawler")])])])],1)],1),_v(" "),_c('div',{attrs:{"id":"flex-body"}},[_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"site-nav","tag-name":"nav","to":"site-nav"}},[_c('div',{staticClass:"site-nav-top"},[_c('div',{staticClass:"font-weight-bold mb-2",staticStyle:{"font-size":"1.25rem"}},[_v("Topics")])]),_v(" "),_c('div',{staticClass:"nav-component slim-scroll"},[_c('site-nav',[_c('overlay-source',{staticClass:"site-nav-list site-nav-list-root",attrs:{"tag-name":"ul","to":"mb-site-nav"}},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Preface\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Motivation.html"}},[_v("Motivation")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Ankiflashcards.html"}},[_v("Anki flashcards")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Indexof-system-design-topics.html"}},[_v("Index")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Studyguide.html"}},[_v("Study Guide")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Interview Questions\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Howto-approach-a-system-design-interview-question.html"}},[_v("How to approach a system design interview question")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Object-orienteddesign-interview-questions-with-solutions.html"}},[_v("OOP interview questions")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Systemdesign-interview-questions-with-solutions.html"}},[_v("System design interview questions")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Systemdesign-topics-start-here.html"}},[_v("System design topics")]),_v(" "),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Performancevs-scalability.html"}},[_v("Performance vs scalability")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Latencyvs-throughput.html"}},[_v("Latency vs throughput")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Availabilityvs-consistency.html"}},[_v("Availability vs consistency")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Consistencypatterns.html"}},[_v("Consistency patterns")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Availabilitypatterns.html"}},[_v("Availability patterns")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Domainname-system.html"}},[_v("Domain name system")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Contentdelivery-network.html"}},[_v("Content delivery network")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Loadbalancer.html"}},[_v("Load balancer")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Reverseproxy-(web-server).html"}},[_v("Reverse proxy (web server)")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Applicationlayer.html"}},[_v("Application layer")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Database.html"}},[_v("Database")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Cache.html"}},[_v("Cache")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Asynchronism.html"}},[_v("Asynchronism")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Communication.html"}},[_v("Communication")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Security.html"}},[_v("Security")])])])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-0",attrs:{"onclick":"handleSiteNavClick(this)"}},[_v("Misc\n\n"),_c('i',{staticClass:"site-nav-dropdown-btn-icon",attrs:{"onclick":"handleSiteNavClick(this.parentNode, false); event.stopPropagation();"}},[_c('span',{staticClass:"glyphicon glyphicon-menu-down",attrs:{"aria-hidden":"true"}})])]),_c('ul',{staticClass:"site-nav-dropdown-container site-nav-list"},[_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Appendix.html"}},[_v("Appendix")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Underdevelopment.html"}},[_v("Under development")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Credits.html"}},[_v("Credits")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Contactinfo.html"}},[_v("Contact info")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/Contributing.html"}},[_v("Contributing")])])]),_v(" "),_c('li',[_c('div',{staticClass:"site-nav-default-list-item site-nav-list-item-1",attrs:{"onclick":"handleSiteNavClick(this)"}},[_c('a',{attrs:{"href":"https://mazx4960.github.io/system-design-primer/contents/contents/License.html"}},[_v("License")])])])])])])],1)],1)]),_v(" "),_m(0),_v(" "),_c('overlay-source',{staticClass:"fixed-header-padding",attrs:{"id":"page-nav","tag-name":"nav","to":"page-nav"}},[_c('div',{staticClass:"nav-component slim-scroll"})])],1),_v(" "),_m(1)])}
};
    var pageVueStaticRenderFns = [function anonymous(
) {
with(this){return _c('div',{staticClass:"fixed-header-padding",attrs:{"id":"content-wrapper"}},[_c('h1',{attrs:{"id":"mint-com"}},[_c('span',{staticClass:"anchor",attrs:{"id":"mint-com"}}),_v("设计 "),_c('a',{attrs:{"href":"http://Mint.com"}},[_v("Mint.com")]),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#mint-com","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_c('strong',[_v("注意：这个文档中的链接会直接指向"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%BB%E9%A2%98%E7%B4%A2%E5%BC%95"}},[_v("系统设计主题索引")]),_v("中的有关部分，以避免重复的内容。您可以参考链接的相关内容，来了解其总的要点、方案的权衡取舍以及可选的替代方案。")])]),_v(" "),_c('h2',{attrs:{"id":""}},[_v("第一步：简述用例与约束条件")]),_v(" "),_c('blockquote',[_c('p',[_v("搜集需求与问题的范围。\n提出问题来明确用例与约束条件。\n讨论假设。")])]),_v(" "),_c('p',[_v("我们将在没有面试官明确说明问题的情况下，自己定义一些用例以及限制条件。")]),_v(" "),_c('h3',{attrs:{"id":"-2"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-2"}}),_v("用例"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-2","onclick":"event.stopPropagation()"}})]),_v(" "),_c('h4',{attrs:{"id":"-3"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-3"}}),_v("我们将把问题限定在仅处理以下用例的范围中"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-3","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("用户")]),_v(" 连接到一个财务账户")]),_v(" "),_c('li',[_c('strong',[_v("服务")]),_v(" 从账户中提取交易\n"),_c('ul',[_c('li',[_v("每日更新")]),_v(" "),_c('li',[_v("分类交易\n"),_c('ul',[_c('li',[_v("允许用户手动分类")]),_v(" "),_c('li',[_v("不自动重新分类")])])]),_v(" "),_c('li',[_v("按类别分析每月支出")])])]),_v(" "),_c('li',[_c('strong',[_v("服务")]),_v(" 推荐预算\n"),_c('ul',[_c('li',[_v("允许用户手动设置预算")]),_v(" "),_c('li',[_v("当接近或者超出预算时，发送通知")])])]),_v(" "),_c('li',[_c('strong',[_v("服务")]),_v(" 具有高可用性")])]),_v(" "),_c('h4',{attrs:{"id":"-4"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-4"}}),_v("非用例范围"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-4","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("服务")]),_v(" 执行附加的日志记录和分析")])]),_v(" "),_c('h3',{attrs:{"id":"-5"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-5"}}),_v("限制条件与假设"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-5","onclick":"event.stopPropagation()"}})]),_v(" "),_c('h4',{attrs:{"id":"-6"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-6"}}),_v("提出假设"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-6","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("网络流量非均匀分布")]),_v(" "),_c('li',[_v("自动账户日更新只适用于 30 天内活跃的用户")]),_v(" "),_c('li',[_v("添加或者移除财务账户相对较少")]),_v(" "),_c('li',[_v("预算通知不需要及时")]),_v(" "),_c('li',[_v("1000 万用户\n"),_c('ul',[_c('li',[_v("每个用户10个预算类别= 1亿个预算项")]),_v(" "),_c('li',[_v("示例类别:\n"),_c('ul',[_c('li',[_v("Housing = $1,000")]),_v(" "),_c('li',[_v("Food = $200")]),_v(" "),_c('li',[_v("Gas = $100")])])]),_v(" "),_c('li',[_v("卖方确定交易类别\n"),_c('ul',[_c('li',[_v("50000 个卖方")])])])])]),_v(" "),_c('li',[_v("3000 万财务账户")]),_v(" "),_c('li',[_v("每月 50 亿交易")]),_v(" "),_c('li',[_v("每月 5 亿读请求")]),_v(" "),_c('li',[_v("10:1 读写比\n"),_c('ul',[_c('li',[_v("Write-heavy，用户每天都进行交易，但是每天很少访问该网站")])])])]),_v(" "),_c('h4',{attrs:{"id":"-7"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-7"}}),_v("计算用量"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-7","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_c('strong',[_v("如果你需要进行粗略的用量计算，请向你的面试官说明。")])]),_v(" "),_c('ul',[_c('li',[_v("每次交易的用量:\n"),_c('ul',[_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("user_id")]),_v(" - 8 字节")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("created_at")]),_v(" - 5 字节")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("seller")]),_v(" - 32 字节")]),_v(" "),_c('li',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("amount")]),_v(" - 5 字节")]),_v(" "),_c('li',[_v("Total: ~50 字节")])])]),_v(" "),_c('li',[_v("每月产生 250 GB 新的交易内容\n"),_c('ul',[_c('li',[_v("每次交易 50 比特 * 50 亿交易每月")]),_v(" "),_c('li',[_v("3年内新的交易内容 9 TB")]),_v(" "),_c('li',[_v("Assume most are new transactions instead of updates to existing ones")])])]),_v(" "),_c('li',[_v("平均每秒产生 2000 次交易")]),_v(" "),_c('li',[_v("平均每秒产生 200 读请求")])]),_v(" "),_c('p',[_v("便利换算指南：")]),_v(" "),_c('ul',[_c('li',[_v("每个月有 250 万秒")]),_v(" "),_c('li',[_v("每秒一个请求 = 每个月 250 万次请求")]),_v(" "),_c('li',[_v("每秒 40 个请求 = 每个月 1 亿次请求")]),_v(" "),_c('li',[_v("每秒 400 个请求 = 每个月 10 亿次请求")])]),_v(" "),_c('h2',{attrs:{"id":"-8"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-8"}}),_v("第二步：概要设计"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-8","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("列出所有重要组件以规划概要设计。")])]),_v(" "),_c('p',[_c('a',{attrs:{"href":"http://i.imgur.com/E8klrBh.png","target":"_self"}},[_c('img',{staticClass:"img-fluid",attrs:{"src":"http://i.imgur.com/E8klrBh.png","alt":""}})])]),_v(" "),_c('h2',{attrs:{"id":"-9"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-9"}}),_v("第三步：设计核心组件"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-9","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("深入每个核心组件的细节。")])]),_v(" "),_c('h3',{attrs:{"id":"-10"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-10"}}),_v("用例：用户连接到一个财务账户"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-10","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("我们可以将 1000 万用户的信息存储在一个"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#relational-database-management-system-rdbms"}},[_v("关系数据库")]),_v("中。我们应该讨论一下"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#sql-or-nosql"}},[_v("选择SQL或NoSQL之间的用例和权衡")]),_v("了。")]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("客户端")]),_v(" 作为一个"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#reverse-proxy-web-server"}},[_v("反向代理")]),_v("，发送请求到 "),_c('strong',[_v("Web 服务器")])]),_v(" "),_c('li',[_c('strong',[_v("Web 服务器")]),_v(" 转发请求到 "),_c('strong',[_v("账户API")]),_v(" 服务器")]),_v(" "),_c('li',[_c('strong',[_v("账户API")]),_v(" 服务器将新输入的账户信息更新到 "),_c('strong',[_v("SQL数据库")]),_v(" 的"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("accounts")]),_v("表")])]),_v(" "),_c('p',[_c('strong',[_v("告知你的面试官你准备写多少代码")]),_v("。")]),_v(" "),_c('p',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("accounts")]),_v("表应该具有如下结构：")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("id int NOT NULL AUTO_INCREMENT\n")]),_c('span',[_v("created_at datetime NOT NULL\n")]),_c('span',[_v("last_update datetime NOT NULL\n")]),_c('span',[_v("account_url varchar(255) NOT NULL\n")]),_c('span',[_v("account_login varchar(32) NOT NULL\n")]),_c('span',[_v("account_password_hash char(64) NOT NULL\n")]),_c('span',[_v("user_id int NOT NULL\n")]),_c('span',[_v("PRIMARY KEY(id)\n")]),_c('span',[_v("FOREIGN KEY(user_id) REFERENCES users(id)\n")])])]),_c('p',[_v("我们将在"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("id")]),_v("，"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("user_id")]),_v("和"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("created_at")]),_v("等字段上创建一个"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#use-good-indices"}},[_v("索引")]),_v("以加速查找（对数时间而不是扫描整个表）并保持数据在内存中。从内存中顺序读取 1 MB数据花费大约250毫秒，而从SSD读取是其4倍，从磁盘读取是其80倍。"),_c('sup',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#latency-numbers-every-programmer-should-know"}},[_v("1")])])]),_v(" "),_c('p',[_v("我们将使用公开的"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#representational-state-transfer-rest"}},[_c('strong',[_v("REST API")])]),_v(":")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("$ curl -X POST --data '{ \"user_id\": \"foo\", \"account_url\": \"bar\", \\\n")]),_c('span',[_v("    \"account_login\": \"baz\", \"account_password\": \"qux\" }' \\\n")]),_c('span',[_v("    https://mint.com/api/v1/account\n")])])]),_c('p',[_v("对于内部通信，我们可以使用"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#remote-procedure-call-rpc"}},[_v("远程过程调用")]),_v("。")]),_v(" "),_c('p',[_v("接下来，服务从账户中提取交易。")]),_v(" "),_c('h3',{attrs:{"id":"-11"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-11"}}),_v("用例：服务从账户中提取交易"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-11","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("如下几种情况下，我们会想要从账户中提取信息：")]),_v(" "),_c('ul',[_c('li',[_v("用户首次链接账户")]),_v(" "),_c('li',[_v("用户手动更新账户")]),_v(" "),_c('li',[_v("为过去 30 天内活跃的用户自动日更新")])]),_v(" "),_c('p',[_v("数据流:")]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("客户端")]),_v("向 "),_c('strong',[_v("Web服务器")]),_v(" 发送请求")]),_v(" "),_c('li',[_c('strong',[_v("Web服务器")]),_v(" 将请求转发到 "),_c('strong',[_v("帐户API")]),_v(" 服务器")]),_v(" "),_c('li',[_c('strong',[_v("帐户API")]),_v(" 服务器将job放在 "),_c('strong',[_v("队列")]),_v(" 中，如 "),_c('a',{attrs:{"href":"https://aws.amazon.com/sqs/"}},[_v("Amazon SQS")]),_v(" 或者 "),_c('a',{attrs:{"href":"https://www.rabbitmq.com/"}},[_v("RabbitMQ")]),_v(" "),_c('ul',[_c('li',[_v("提取交易可能需要一段时间，我们可能希望"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#asynchronism"}},[_v("与队列异步")]),_v("地来做，虽然这会引入额外的复杂度。")])])]),_v(" "),_c('li',[_c('strong',[_v("交易提取服务")]),_v(" 执行如下操作：\n"),_c('ul',[_c('li',[_v("从 "),_c('strong',[_v("Queue")]),_v(" 中拉取并从金融机构中提取给定用户的交易，将结果作为原始日志文件存储在 "),_c('strong',[_v("对象存储区")]),_v("。")]),_v(" "),_c('li',[_v("使用 "),_c('strong',[_v("分类服务")]),_v(" 来分类每个交易")]),_v(" "),_c('li',[_v("使用 "),_c('strong',[_v("预算服务")]),_v(" 来按类别计算每月总支出\n"),_c('ul',[_c('li',[_c('strong',[_v("预算服务")]),_v(" 使用 "),_c('strong',[_v("通知服务")]),_v(" 让用户知道他们是否接近或者已经超出预算")])])]),_v(" "),_c('li',[_v("更新具有分类交易的 "),_c('strong',[_v("SQL数据库")]),_v(" 的"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("transactions")]),_v("表")]),_v(" "),_c('li',[_v("按类别更新 "),_c('strong',[_v("SQL数据库")]),_v(" "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("monthly_spending")]),_v("表的每月总支出")]),_v(" "),_c('li',[_v("通过 "),_c('strong',[_v("通知服务")]),_v(" 提醒用户交易完成\n"),_c('ul',[_c('li',[_v("使用一个 "),_c('strong',[_v("队列")]),_v(" (没有画出来) 来异步发送通知")])])])])])]),_v(" "),_c('p',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("transactions")]),_v("表应该具有如下结构：")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("id int NOT NULL AUTO_INCREMENT\n")]),_c('span',[_v("created_at datetime NOT NULL\n")]),_c('span',[_v("seller varchar(32) NOT NULL\n")]),_c('span',[_v("amount decimal NOT NULL\n")]),_c('span',[_v("user_id int NOT NULL\n")]),_c('span',[_v("PRIMARY KEY(id)\n")]),_c('span',[_v("FOREIGN KEY(user_id) REFERENCES users(id)\n")])])]),_c('p',[_v("我们将在 "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("id")]),_v("，"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("user_id")]),_v("，和 "),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("created_at")]),_v("字段上创建"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#use-good-indices"}},[_v("索引")]),_v("。")]),_v(" "),_c('p',[_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("monthly_spending")]),_v("表应该具有如下结构：")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("id int NOT NULL AUTO_INCREMENT\n")]),_c('span',[_v("month_year date NOT NULL\n")]),_c('span',[_v("category varchar(32)\n")]),_c('span',[_v("amount decimal NOT NULL\n")]),_c('span',[_v("user_id int NOT NULL\n")]),_c('span',[_v("PRIMARY KEY(id)\n")]),_c('span',[_v("FOREIGN KEY(user_id) REFERENCES users(id)\n")])])]),_c('p',[_v("我们将在"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("id")]),_v("，"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("user_id")]),_v("字段上创建"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#use-good-indices"}},[_v("索引")]),_v("。")]),_v(" "),_c('h4',{attrs:{"id":"-12"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-12"}}),_v("分类服务"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-12","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("对于 "),_c('strong',[_v("分类服务")]),_v("，我们可以生成一个带有最受欢迎卖家的卖家-类别字典。如果我们估计 50000 个卖家，并估计每个条目占用不少于 255 个字节，该字典只需要大约 12 MB内存。")]),_v(" "),_c('p',[_c('strong',[_v("告知你的面试官你准备写多少代码")]),_v("。")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("DefaultCategories")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("Enum")]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    HOUSING = "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v("0")]),_v("\n")]),_c('span',[_v("    FOOD = "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v("1")]),_v("\n")]),_c('span',[_v("    GAS = "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v("2")]),_v("\n")]),_c('span',[_v("    SHOPPING = "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v("3")]),_v("\n")]),_c('span',[_v("    ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("seller_category_map = {}\n")]),_c('span',[_v("seller_category_map["),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'Exxon'")]),_v("] = DefaultCategories.GAS\n")]),_c('span',[_v("seller_category_map["),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'Target'")]),_v("] = DefaultCategories.SHOPPING\n")]),_c('span',[_v("...\n")])])]),_c('p',[_v("对于一开始没有在映射中的卖家，我们可以通过评估用户提供的手动类别来进行众包。在 O(1) 时间内，我们可以用堆来快速查找每个卖家的顶端的手动覆盖。")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("Categorizer")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("object")])]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("__init__")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, seller_category_map, self.seller_category_crowd_overrides_map")]),_v("):")]),_v("\n")]),_c('span',[_v("        self.seller_category_map = seller_category_map\n")]),_c('span',[_v("        self.seller_category_crowd_overrides_map = \\\n")]),_c('span',[_v("            seller_category_crowd_overrides_map\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("categorize")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, transaction")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("if")]),_v(" transaction.seller "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("in")]),_v(" self.seller_category_map:\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("return")]),_v(" self.seller_category_map[transaction.seller]\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("elif")]),_v(" transaction.seller "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("in")]),_v(" self.seller_category_crowd_overrides_map:\n")]),_c('span',[_v("            self.seller_category_map[transaction.seller] = \\\n")]),_c('span',[_v("                self.seller_category_crowd_overrides_map[transaction.seller].peek_min()\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("return")]),_v(" self.seller_category_map[transaction.seller]\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("return")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-literal"}},[_v("None")]),_v("\n")])])]),_c('p',[_v("交易实现：")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("Transaction")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("object")])]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("__init__")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, created_at, seller, amount")]),_v("):")]),_v("\n")]),_c('span',[_v("        self.timestamp = timestamp\n")]),_c('span',[_v("        self.seller = seller\n")]),_c('span',[_v("        self.amount = amount\n")])])]),_c('h3',{attrs:{"id":"-13"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-13"}}),_v("用例：服务推荐预算"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-13","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("首先，我们可以使用根据收入等级分配每类别金额的通用预算模板。使用这种方法，我们不必存储在约束中标识的 1 亿个预算项目，只需存储用户覆盖的预算项目。如果用户覆盖预算类别，我们可以在\n"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("TABLE budget_overrides")]),_v("中存储此覆盖。")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("Budget")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("object")])]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("__init__")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, income")]),_v("):")]),_v("\n")]),_c('span',[_v("        self.income = income\n")]),_c('span',[_v("        self.categories_to_budget_map = self.create_budget_template()\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("create_budget_template")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("return")]),_v(" {\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'DefaultCategories.HOUSING'")]),_v(": income * "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v(".4")]),_v(",\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'DefaultCategories.FOOD'")]),_v(": income * "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v(".2")]),_v("\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'DefaultCategories.GAS'")]),_v(": income * "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v(".1")]),_v(",\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'DefaultCategories.SHOPPING'")]),_v(": income * "),_c('span',{pre:true,attrs:{"class":"hljs-number"}},[_v(".2")]),_v("\n")]),_c('span',[_v("            ...\n")]),_c('span',[_v("        }\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("override_category_budget")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, category, amount")]),_v("):")]),_v("\n")]),_c('span',[_v("        self.categories_to_budget_map[category] = amount\n")])])]),_c('p',[_v("对于 "),_c('strong',[_v("预算服务")]),_v(" 而言，我们可以在"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("transactions")]),_v("表上运行SQL查询以生成"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("monthly_spending")]),_v("聚合表。由于用户通常每个月有很多交易，所以"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("monthly_spending")]),_v("表的行数可能会少于总共50亿次交易的行数。")]),_v(" "),_c('p',[_v("作为替代，我们可以在原始交易文件上运行 "),_c('strong',[_v("MapReduce")]),_v(" 作业来：")]),_v(" "),_c('ul',[_c('li',[_v("分类每个交易")]),_v(" "),_c('li',[_v("按类别生成每月总支出")])]),_v(" "),_c('p',[_v("对交易文件的运行分析可以显著减少数据库的负载。")]),_v(" "),_c('p',[_v("如果用户更新类别，我们可以调用 "),_c('strong',[_v("预算服务")]),_v(" 重新运行分析。")]),_v(" "),_c('p',[_c('strong',[_v("告知你的面试官你准备写多少代码")]),_v(".")]),_v(" "),_c('p',[_v("日志文件格式样例，以tab分割：")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs"}},[_c('span',[_v("user_id   timestamp   seller  amount\n")])])]),_c('p',[_c('strong',[_v("MapReduce")]),_v(" 实现:")]),_v(" "),_c('pre',[_c('code',{pre:true,attrs:{"class":"hljs python"}},[_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-class"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("class")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("SpendingByCategory")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("MRJob")]),_v("):")]),_v("\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("__init__")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, categorizer")]),_v("):")]),_v("\n")]),_c('span',[_v("        self.categorizer = categorizer\n")]),_c('span',[_v("        self.current_year_month = calc_current_year_month()\n")]),_c('span',[_v("        ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("calc_current_year_month")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"返回当前年月\"\"\"")]),_v("\n")]),_c('span',[_v("        ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("extract_year_month")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, timestamp")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"返回时间戳的年，月部分\"\"\"")]),_v("\n")]),_c('span',[_v("        ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("handle_budget_notifications")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, key, total")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"如果接近或超出预算，调用通知API\"\"\"")]),_v("\n")]),_c('span',[_v("        ...\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("mapper")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, _, line")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"解析每个日志行，提取和转换相关行。")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        参数行应为如下形式：")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        user_id   timestamp   seller  amount")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        使用分类器来将卖家转换成类别，生成如下形式的key-value对：")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (user_id, 2016-01, shopping), 25")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (user_id, 2016-01, shopping), 100")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (user_id, 2016-01, gas), 50")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        \"\"\"")]),_v("\n")]),_c('span',[_v("        user_id, timestamp, seller, amount = line.split("),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("'\\t'")]),_v(")\n")]),_c('span',[_v("        category = self.categorizer.categorize(seller)\n")]),_c('span',[_v("        period = self.extract_year_month(timestamp)\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("if")]),_v(" period == self.current_year_month:\n")]),_c('span',[_v("            "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" (user_id, period, category), amount\n")]),_c('span',[_v("\n")]),_c('span',[_v("    "),_c('span',{pre:true,attrs:{"class":"hljs-function"}},[_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("def")]),_v(" "),_c('span',{pre:true,attrs:{"class":"hljs-title"}},[_v("reducer")]),_v("("),_c('span',{pre:true,attrs:{"class":"hljs-params"}},[_v("self, key, value")]),_v("):")]),_v("\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("\"\"\"将每个key对应的值求和。")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}}),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (user_id, 2016-01, shopping), 125")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        (user_id, 2016-01, gas), 50")]),_v("\n")]),_c('span',[_c('span',{pre:true,attrs:{"class":"hljs-string"}},[_v("        \"\"\"")]),_v("\n")]),_c('span',[_v("        total = "),_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("sum")]),_v("(values)\n")]),_c('span',[_v("        "),_c('span',{pre:true,attrs:{"class":"hljs-keyword"}},[_v("yield")]),_v(" key, "),_c('span',{pre:true,attrs:{"class":"hljs-built_in"}},[_v("sum")]),_v("(values)\n")])])]),_c('h2',{attrs:{"id":"-14"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-14"}}),_v("第四步：设计扩展"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-14","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("根据限制条件，找到并解决瓶颈。")])]),_v(" "),_c('p',[_c('a',{attrs:{"href":"http://i.imgur.com/V5q57vU.png","target":"_self"}},[_c('img',{staticClass:"img-fluid",attrs:{"src":"http://i.imgur.com/V5q57vU.png","alt":""}})])]),_v(" "),_c('p',[_c('strong',[_v("重要提示：不要从最初设计直接跳到最终设计中！")])]),_v(" "),_c('p',[_v("现在你要 1) "),_c('strong',[_v("基准测试、负载测试")]),_v("。2) "),_c('strong',[_v("分析、描述")]),_v("性能瓶颈。3) 在解决瓶颈问题的同时，评估替代方案、权衡利弊。4) 重复以上步骤。请阅读"),_c('a',{attrs:{"href":"/mazx4960.github.io/system-design-primer/contents/solutions/system_design/scaling_aws/README.html"}},[_v("「设计一个系统，并将其扩大到为数以百万计的 AWS 用户服务」")]),_v(" 来了解如何逐步扩大初始设计。")]),_v(" "),_c('p',[_v("讨论初始设计可能遇到的瓶颈及相关解决方案是很重要的。例如加上一个配置多台 "),_c('strong',[_v("Web 服务器")]),_v("的"),_c('strong',[_v("负载均衡器")]),_v("是否能够解决问题？"),_c('strong',[_v("CDN")]),_v("呢？"),_c('strong',[_v("主从复制")]),_v("呢？它们各自的替代方案和需要"),_c('strong',[_v("权衡")]),_v("的利弊又有什么呢？")]),_v(" "),_c('p',[_v("我们将会介绍一些组件来完成设计，并解决架构扩张问题。内置的负载均衡器将不做讨论以节省篇幅。")]),_v(" "),_c('p',[_c('strong',[_v("为了避免重复讨论")]),_v("，请参考"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%BB%E9%A2%98%E7%9A%84%E7%B4%A2%E5%BC%95"}},[_v("系统设计主题索引")]),_v("相关部分来了解其要点、方案的权衡取舍以及可选的替代方案。")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"}},[_v("DNS")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%99%A8"}},[_v("负载均衡器")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%B0%B4%E5%B9%B3%E6%89%A9%E5%B1%95"}},[_v("水平拓展")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86web-%E6%9C%8D%E5%8A%A1%E5%99%A8"}},[_v("反向代理（web 服务器）")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BA%94%E7%94%A8%E5%B1%82"}},[_v("API 服务（应用层）")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%BC%93%E5%AD%98"}},[_v("缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9Frdbms"}},[_v("关系型数据库管理系统 (RDBMS)")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%95%85%E9%9A%9C%E5%88%87%E6%8D%A2"}},[_v("SQL 故障主从切换")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"}},[_v("主从复制")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BC%82%E6%AD%A5"}},[_v("异步")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%B8%80%E8%87%B4%E6%80%A7%E6%A8%A1%E5%BC%8F"}},[_v("一致性模式")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%8F%AF%E7%94%A8%E6%80%A7%E6%A8%A1%E5%BC%8F"}},[_v("可用性模式")])])]),_v(" "),_c('p',[_v("我们将增加一个额外的用例："),_c('strong',[_v("用户")]),_v(" 访问摘要和交易数据。")]),_v(" "),_c('p',[_v("用户会话，按类别统计的统计信息，以及最近的事务可以放在 "),_c('strong',[_v("内存缓存")]),_v("（如 Redis 或 Memcached ）中。")]),_v(" "),_c('ul',[_c('li',[_c('strong',[_v("客户端")]),_v(" 发送读请求给 "),_c('strong',[_v("Web 服务器")])]),_v(" "),_c('li',[_c('strong',[_v("Web 服务器")]),_v(" 转发请求到 "),_c('strong',[_v("读 API")]),_v(" 服务器\n"),_c('ul',[_c('li',[_v("静态内容可通过 "),_c('strong',[_v("对象存储")]),_v(" 比如缓存在 "),_c('strong',[_v("CDN")]),_v(" 上的 S3 来服务")])])]),_v(" "),_c('li',[_c('strong',[_v("读 API")]),_v(" 服务器做如下动作:\n"),_c('ul',[_c('li',[_v("检查 "),_c('strong',[_v("内存缓存")]),_v(" 的内容\n"),_c('ul',[_c('li',[_v("如果URL在 "),_c('strong',[_v("内存缓存")]),_v("中，返回缓存的内容")]),_v(" "),_c('li',[_v("否则\n"),_c('ul',[_c('li',[_v("如果URL在 "),_c('strong',[_v("SQL 数据库")]),_v("中，获取该内容\n"),_c('ul',[_c('li',[_v("以其内容更新 "),_c('strong',[_v("内存缓存")])])])])])])])])])])]),_v(" "),_c('p',[_v("参考 "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#when-to-update-the-cache"}},[_v("何时更新缓存")]),_v(" 中权衡和替代的内容。以上方法描述了 "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer#cache-aside"}},[_v("cache-aside缓存模式")]),_v(".")]),_v(" "),_c('p',[_v("我们可以使用诸如 Amazon Redshift 或者 Google BigQuery 等数据仓库解决方案，而不是将"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("monthly_spending")]),_v("聚合表保留在 "),_c('strong',[_v("SQL 数据库")]),_v(" 中。")]),_v(" "),_c('p',[_v("我们可能只想在数据库中存储一个月的"),_c('code',{pre:true,attrs:{"class":"hljs inline no-lang"}},[_v("交易")]),_v("数据，而将其余数据存储在数据仓库或者 "),_c('strong',[_v("对象存储区")]),_v(" 中。"),_c('strong',[_v("对象存储区")]),_v(" （如Amazon S3) 能够舒服地解决每月 250 GB新内容的限制。")]),_v(" "),_c('p',[_v("为了解决每秒 "),_c('em',[_v("平均")]),_v(" 2000 次读请求数（峰值时更高），受欢迎的内容的流量应由 "),_c('strong',[_v("内存缓存")]),_v(" 而不是数据库来处理。 "),_c('strong',[_v("内存缓存")]),_v(" 也可用于处理不均匀分布的流量和流量尖峰。 只要副本不陷入重复写入的困境，"),_c('strong',[_v("SQL 读副本")]),_v(" 应该能够处理高速缓存未命中。")]),_v(" "),_c('p',[_c('em',[_v("平均")]),_v(" 200 次交易写入每秒（峰值时更高）对于单个 "),_c('strong',[_v("SQL 写入主-从服务")]),_v(" 来说可能是棘手的。我们可能需要考虑其它的 SQL 性能拓展技术：")]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%81%94%E5%90%88"}},[_v("联合")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%86%E7%89%87"}},[_v("分片")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E9%9D%9E%E8%A7%84%E8%8C%83%E5%8C%96"}},[_v("非规范化")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#sql-%E8%B0%83%E4%BC%98"}},[_v("SQL 调优")])])]),_v(" "),_c('p',[_v("我们也可以考虑将一些数据移至 "),_c('strong',[_v("NoSQL 数据库")]),_v("。")]),_v(" "),_c('h2',{attrs:{"id":"-15"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-15"}}),_v("其它要点"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-15","onclick":"event.stopPropagation()"}})]),_v(" "),_c('blockquote',[_c('p',[_v("是否深入这些额外的主题，取决于你的问题范围和剩下的时间。")])]),_v(" "),_c('h4',{attrs:{"id":"nosql"}},[_c('span',{staticClass:"anchor",attrs:{"id":"nosql"}}),_v("NoSQL"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#nosql","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E9%94%AE-%E5%80%BC%E5%AD%98%E5%82%A8"}},[_v("键-值存储")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%96%87%E6%A1%A3%E7%B1%BB%E5%9E%8B%E5%AD%98%E5%82%A8"}},[_v("文档类型存储")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%97%E5%9E%8B%E5%AD%98%E5%82%A8"}},[_v("列型存储")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93"}},[_v("图数据库")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#sql-%E8%BF%98%E6%98%AF-nosql"}},[_v("SQL vs NoSQL")])])]),_v(" "),_c('h3',{attrs:{"id":"-16"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-16"}}),_v("缓存"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-16","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("在哪缓存\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%BC%93%E5%AD%98"}},[_v("客户端缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#cdn-%E7%BC%93%E5%AD%98"}},[_v("CDN 缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%93%E5%AD%98"}},[_v("Web 服务器缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%93%E5%AD%98"}},[_v("数据库缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BA%94%E7%94%A8%E7%BC%93%E5%AD%98"}},[_v("应用缓存")])])])]),_v(" "),_c('li',[_v("什么需要缓存\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E7%BA%A7%E5%88%AB%E7%9A%84%E7%BC%93%E5%AD%98"}},[_v("数据库查询级别的缓存")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AF%B9%E8%B1%A1%E7%BA%A7%E5%88%AB%E7%9A%84%E7%BC%93%E5%AD%98"}},[_v("对象级别的缓存")])])])]),_v(" "),_c('li',[_v("何时更新缓存\n"),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%BC%93%E5%AD%98%E6%A8%A1%E5%BC%8F"}},[_v("缓存模式")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E7%9B%B4%E5%86%99%E6%A8%A1%E5%BC%8F"}},[_v("直写模式")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%9B%9E%E5%86%99%E6%A8%A1%E5%BC%8F"}},[_v("回写模式")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%88%B7%E6%96%B0"}},[_v("刷新")])])])])]),_v(" "),_c('h3',{attrs:{"id":"-17"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-17"}}),_v("异步与微服务"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-17","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"}},[_v("消息队列")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97"}},[_v("任务队列")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%83%8C%E5%8E%8B"}},[_v("背压")])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%BE%AE%E6%9C%8D%E5%8A%A1"}},[_v("微服务")])])]),_v(" "),_c('h3',{attrs:{"id":"-18"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-18"}}),_v("通信"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-18","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("可权衡选择的方案：\n"),_c('ul',[_c('li',[_v("与客户端的外部通信 - "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%A1%A8%E8%BF%B0%E6%80%A7%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BBrest"}},[_v("使用 REST 作为 HTTP API")])]),_v(" "),_c('li',[_v("服务器内部通信 - "),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8%E5%8D%8F%E8%AE%AErpc"}},[_v("RPC")])])])]),_v(" "),_c('li',[_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0"}},[_v("服务发现")])])]),_v(" "),_c('h3',{attrs:{"id":"-19"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-19"}}),_v("安全性"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-19","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("请参阅"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E5%AE%89%E5%85%A8"}},[_v("「安全」")]),_v("一章。")]),_v(" "),_c('h3',{attrs:{"id":"-20"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-20"}}),_v("延迟数值"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-20","onclick":"event.stopPropagation()"}})]),_v(" "),_c('p',[_v("请参阅"),_c('a',{attrs:{"href":"https://github.com/donnemartin/system-design-primer/blob/master/README-zh-Hans.md#%E6%AF%8F%E4%B8%AA%E7%A8%8B%E5%BA%8F%E5%91%98%E9%83%BD%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E5%BB%B6%E8%BF%9F%E6%95%B0"}},[_v("「每个程序员都应该知道的延迟数」")]),_v("。")]),_v(" "),_c('h3',{attrs:{"id":"-21"}},[_c('span',{staticClass:"anchor",attrs:{"id":"-21"}}),_v("持续探讨"),_c('a',{staticClass:"fa fa-anchor",attrs:{"href":"#-21","onclick":"event.stopPropagation()"}})]),_v(" "),_c('ul',[_c('li',[_v("持续进行基准测试并监控你的系统，以解决他们提出的瓶颈问题。")]),_v(" "),_c('li',[_v("架构拓展是一个迭代的过程。")])]),_v(" "),_c('i',{staticClass:"fa fa-arrow-circle-up fa-lg d-print-none",attrs:{"id":"scroll-top-button","onclick":"handleScrollTop()","aria-hidden":"true"}})])}
},function anonymous(
) {
with(this){return _c('footer',[_c('div',{staticClass:"text-center"},[_c('small',[_v("[Generated by "),_c('a',{attrs:{"href":"https://markbind.org/"}},[_v("MarkBind 3.1.1")]),_v("]")])])])}
}];
  