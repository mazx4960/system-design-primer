<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 3.1.1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="../markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="../markbind/css/bootstrap-vue.min.css">
    <link rel="stylesheet" href="../markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="../markbind/css/octicons.css">
    <link rel="stylesheet" href="../markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="../markbind/css/codeblock-dark.min.css"><link rel="stylesheet" href="../markbind/css/markbind.min.css"><script src="../markbind/js/polyfill.min.js"></script>
    <script src="../markbind/js/vue.min.js"></script>
    <script src="../markbind/js/markbind.min.js"></script>
    <script src="Cache.page-vue-render.js"></script>
    <script src="../markbind/js/jquery.min.js"></script><link rel="stylesheet" href="https:/mazx4960.github.io/system-design-primer/contents/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css">
    
  <link rel="stylesheet" href="https://mazx4960.github.io/system-design-primer/contents/stylesheets/main.css">
</head>
<script>
  const baseUrl = 'https://mazx4960.github.io/system-design-primer/contents'
</script>
<body  data-spy="scroll" data-target="#mb-page-nav" data-offset="100" >
<div id="app" data-server-rendered="true"><header fixed=""><div data-v-15113a2f><nav class="navbar navbar-expand-md navbar-dark bg-dark" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="https://mazx4960.github.io/system-design-primer/contents/index.html" title="Home" class="navbar-brand" data-v-15113a2f>System Design Primer</a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav mr-auto mt-2 mt-lg-0" data-v-15113a2f> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" class="dropdown-toggle" data-v-2e98b3f0>Solutions</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/mint/readme.html" class="dropdown-item" data-v-2e98b3f0>mint</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/pastebin/readme.html" class="dropdown-item" data-v-2e98b3f0>pastebin</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/query_cache/readme.html" class="dropdown-item" data-v-2e98b3f0>query_cache</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/sales_rank/readme.html" class="dropdown-item" data-v-2e98b3f0>sales_rank</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/scaling_aws/readme.html" class="dropdown-item" data-v-2e98b3f0>scaling_aws</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/social_graph/readme.html" class="dropdown-item" data-v-2e98b3f0>social_graph</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/twitter/readme.html" class="dropdown-item" data-v-2e98b3f0>twitter</a></li> <li data-v-2e98b3f0><a href="https://mazx4960.github.io/system-design-primer/contents/solutions/system_design/web_crawler/readme.html" class="dropdown-item" data-v-2e98b3f0>web_crawler</a></li></ul></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><form class="navbar-form" data-v-15113a2f><div style="position:relative;"><input type="text" placeholder="Search" autocomplete="off" value="" class="form-control"> <ul class="dropdown-menu search-dropdown-menu dropdown-menu-right"></ul></div></form></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" class="fixed-header-padding" data-v-e8c82f88><div class="site-nav-top" data-v-e8c82f88><div class="font-weight-bold mb-2" style="font-size:1.25rem;" data-v-e8c82f88>Topics</div></div> <div class="nav-component slim-scroll" data-v-e8c82f88><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Preface

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Motivation.html" data-v-e8c82f88>Motivation</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Ankiflashcards.html" data-v-e8c82f88>Anki flashcards</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Indexof-system-design-topics.html" data-v-e8c82f88>Index</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Studyguide.html" data-v-e8c82f88>Study Guide</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Interview Questions

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Howto-approach-a-system-design-interview-question.html" data-v-e8c82f88>How to approach a system design interview question</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Object-orienteddesign-interview-questions-with-solutions.html" data-v-e8c82f88>OOP interview questions</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Systemdesign-interview-questions-with-solutions.html" data-v-e8c82f88>System design interview questions</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Systemdesign-topics-start-here.html" data-v-e8c82f88>System design topics</a> <i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Performancevs-scalability.html" data-v-e8c82f88>Performance vs scalability</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Latencyvs-throughput.html" data-v-e8c82f88>Latency vs throughput</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Availabilityvs-consistency.html" data-v-e8c82f88>Availability vs consistency</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Consistencypatterns.html" data-v-e8c82f88>Consistency patterns</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Availabilitypatterns.html" data-v-e8c82f88>Availability patterns</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Domainname-system.html" data-v-e8c82f88>Domain name system</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Contentdelivery-network.html" data-v-e8c82f88>Content delivery network</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Loadbalancer.html" data-v-e8c82f88>Load balancer</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Reverseproxy-(web-server).html" data-v-e8c82f88>Reverse proxy (web server)</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Applicationlayer.html" data-v-e8c82f88>Application layer</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Database.html" data-v-e8c82f88>Database</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Cache.html" data-v-e8c82f88>Cache</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Asynchronism.html" data-v-e8c82f88>Asynchronism</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Communication.html" data-v-e8c82f88>Communication</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Security.html" data-v-e8c82f88>Security</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Misc

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Appendix.html" data-v-e8c82f88>Appendix</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Underdevelopment.html" data-v-e8c82f88>Under development</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Credits.html" data-v-e8c82f88>Credits</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Contactinfo.html" data-v-e8c82f88>Contact info</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/Contributing.html" data-v-e8c82f88>Contributing</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="https://mazx4960.github.io/system-design-primer/contents/contents/License.html" data-v-e8c82f88>License</a></div></li></ul></li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper" class="fixed-header-padding"><br> <h2 id="cache"><span id="cache" class="anchor"></span>Cache<a href="#cache" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p align="center"><img src="/images/Q6z24La.png"> <br> <i><a href="http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html">Source: Scalable system design patterns</a></i></p> <p>Caching improves page load times and can reduce the load on your servers and databases.  In this model, the dispatcher will first lookup if the request has been made before and try to find the previous result to return, in order to save the actual execution.</p> <p>Databases often benefit from a uniform distribution of reads and writes across its partitions.  Popular items can skew the distribution, causing bottlenecks.  Putting a cache in front of a database can help absorb uneven loads and spikes in traffic.</p> <h3 id="client-caching"><span id="client-caching" class="anchor"></span>Client caching<a href="#client-caching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Caches can be located on the client side (OS or browser), <a href="#reverse-proxy-web-server">server side</a>, or in a distinct cache layer.</p> <h3 id="cdn-caching"><span id="cdn-caching" class="anchor"></span>CDN caching<a href="#cdn-caching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p><a href="#content-delivery-network">CDNs</a> are considered a type of cache.</p> <h3 id="web-server-caching"><span id="web-server-caching" class="anchor"></span>Web server caching<a href="#web-server-caching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p><a href="#reverse-proxy-web-server">Reverse proxies</a> and caches such as <a href="https://www.varnish-cache.org/">Varnish</a> can serve static and dynamic content directly.  Web servers can also cache requests, returning responses without having to contact application servers.</p> <h3 id="database-caching"><span id="database-caching" class="anchor"></span>Database caching<a href="#database-caching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Your database usually includes some level of caching in a default configuration, optimized for a generic use case.  Tweaking these settings for specific usage patterns can further boost performance.</p> <h3 id="application-caching"><span id="application-caching" class="anchor"></span>Application caching<a href="#application-caching" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>In-memory caches such as Memcached and Redis are key-value stores between your application and your data storage.  Since the data is held in RAM, it is much faster than typical databases where data is stored on disk.  RAM is more limited than disk, so <a href="https://en.wikipedia.org/wiki/Cache_algorithms">cache invalidation</a> algorithms such as <a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)">least recently used (LRU)</a> can help invalidate 'cold' entries and keep 'hot' data in RAM.</p> <p>Redis has the following additional features:</p> <ul><li>Persistence option</li> <li>Built-in data structures such as sorted sets and lists</li></ul> <p>There are multiple levels you can cache that fall into two general categories: <strong>database queries</strong> and <strong>objects</strong>:</p> <ul><li>Row level</li> <li>Query-level</li> <li>Fully-formed serializable objects</li> <li>Fully-rendered HTML</li></ul> <p>Generally, you should try to avoid file-based caching, as it makes cloning and auto-scaling more difficult.</p> <h3 id="caching-at-the-database-query-level"><span id="caching-at-the-database-query-level" class="anchor"></span>Caching at the database query level<a href="#caching-at-the-database-query-level" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Whenever you query the database, hash the query as a key and store the result to the cache.  This approach suffers from expiration issues:</p> <ul><li>Hard to delete a cached result with complex queries</li> <li>If one piece of data changes such as a table cell, you need to delete all cached queries that might include the changed cell</li></ul> <h3 id="caching-at-the-object-level"><span id="caching-at-the-object-level" class="anchor"></span>Caching at the object level<a href="#caching-at-the-object-level" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>See your data as an object, similar to what you do with your application code.  Have your application assemble the dataset from the database into a class instance or a data structure(s):</p> <ul><li>Remove the object from cache if its underlying data has changed</li> <li>Allows for asynchronous processing: workers assemble objects by consuming the latest cached object</li></ul> <p>Suggestions of what to cache:</p> <ul><li>User sessions</li> <li>Fully rendered web pages</li> <li>Activity streams</li> <li>User graph data</li></ul> <h3 id="when-to-update-the-cache"><span id="when-to-update-the-cache" class="anchor"></span>When to update the cache<a href="#when-to-update-the-cache" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Since you can only store a limited amount of data in cache, you'll need to determine which cache update strategy works best for your use case.</p> <h4 id="cache-aside"><span id="cache-aside" class="anchor"></span>Cache-aside<a href="#cache-aside" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p align="center"><img src="/images/ONjORqk.png"> <br> <i><a href="http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast">Source: From cache to in-memory data grid</a></i></p> <p>The application is responsible for reading and writing from storage.  The cache does not interact with storage directly.  The application does the following:</p> <ul><li>Look for entry in cache, resulting in a cache miss</li> <li>Load entry from the database</li> <li>Add entry to cache</li> <li>Return entry</li></ul> <pre><code class="hljs python"><span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_user</span>(<span class="hljs-params">self, user_id</span>):</span>
</span><span>    user = cache.get(<span class="hljs-string">&quot;user.{0}&quot;</span>, user_id)
</span><span>    <span class="hljs-keyword">if</span> user <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
</span><span>        user = db.query(<span class="hljs-string">&quot;SELECT * FROM users WHERE user_id = {0}&quot;</span>, user_id)
</span><span>        <span class="hljs-keyword">if</span> user <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
</span><span>            key = <span class="hljs-string">&quot;user.{0}&quot;</span>.<span class="hljs-built_in">format</span>(user_id)
</span><span>            cache.<span class="hljs-built_in">set</span>(key, json.dumps(user))
</span><span>    <span class="hljs-keyword">return</span> user
</span></code></pre><p><a href="https://memcached.org/">Memcached</a> is generally used in this manner.</p> <p>Subsequent reads of data added to cache are fast.  Cache-aside is also referred to as lazy loading.  Only requested data is cached, which avoids filling up the cache with data that isn't requested.</p> <h5 id="disadvantage-s-cache-aside"><span id="disadvantage-s-cache-aside" class="anchor"></span>Disadvantage(s): cache-aside<a href="#disadvantage-s-cache-aside" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <ul><li>Each cache miss results in three trips, which can cause a noticeable delay.</li> <li>Data can become stale if it is updated in the database.  This issue is mitigated by setting a time-to-live (TTL) which forces an update of the cache entry, or by using write-through.</li> <li>When a node fails, it is replaced by a new, empty node, increasing latency.</li></ul> <h4 id="write-through"><span id="write-through" class="anchor"></span>Write-through<a href="#write-through" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p align="center"><img src="/images/0vBc0hN.png"> <br> <i><a href="http://www.slideshare.net/jboner/scalability-availability-stability-patterns/">Source: Scalability, availability, stability, patterns</a></i></p> <p>The application uses the cache as the main data store, reading and writing data to it, while the cache is responsible for reading and writing to the database:</p> <ul><li>Application adds/updates entry in cache</li> <li>Cache synchronously writes entry to data store</li> <li>Return</li></ul> <p>Application code:</p> <pre><code class="hljs python"><span>set_user(<span class="hljs-number">12345</span>, {<span class="hljs-string">&quot;foo&quot;</span>:<span class="hljs-string">&quot;bar&quot;</span>})
</span></code></pre><p>Cache code:</p> <pre><code class="hljs python"><span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_user</span>(<span class="hljs-params">user_id, values</span>):</span>
</span><span>    user = db.query(<span class="hljs-string">&quot;UPDATE Users WHERE id = {0}&quot;</span>, user_id, values)
</span><span>    cache.<span class="hljs-built_in">set</span>(user_id, user)
</span></code></pre><p>Write-through is a slow overall operation due to the write operation, but subsequent reads of just written data are fast.  Users are generally more tolerant of latency when updating data than reading data.  Data in the cache is not stale.</p> <h5 id="disadvantage-s-write-through"><span id="disadvantage-s-write-through" class="anchor"></span>Disadvantage(s): write through<a href="#disadvantage-s-write-through" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <ul><li>When a new node is created due to failure or scaling, the new node will not cache entries until the entry is updated in the database.  Cache-aside in conjunction with write through can mitigate this issue.</li> <li>Most data written might never be read, which can be minimized with a TTL.</li></ul> <h4 id="write-behind-write-back"><span id="write-behind-write-back" class="anchor"></span>Write-behind (write-back)<a href="#write-behind-write-back" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p align="center"><img src="/images/rgSrvjG.png"> <br> <i><a href="http://www.slideshare.net/jboner/scalability-availability-stability-patterns/">Source: Scalability, availability, stability, patterns</a></i></p> <p>In write-behind, the application does the following:</p> <ul><li>Add/update entry in cache</li> <li>Asynchronously write entry to the data store, improving write performance</li></ul> <h5 id="disadvantage-s-write-behind"><span id="disadvantage-s-write-behind" class="anchor"></span>Disadvantage(s): write-behind<a href="#disadvantage-s-write-behind" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <ul><li>There could be data loss if the cache goes down prior to its contents hitting the data store.</li> <li>It is more complex to implement write-behind than it is to implement cache-aside or write-through.</li></ul> <h4 id="refresh-ahead"><span id="refresh-ahead" class="anchor"></span>Refresh-ahead<a href="#refresh-ahead" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p align="center"><img src="/images/kxtjqgE.png"> <br> <i><a href="http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast">Source: From cache to in-memory data grid</a></i></p> <p>You can configure the cache to automatically refresh any recently accessed cache entry prior to its expiration.</p> <p>Refresh-ahead can result in reduced latency vs read-through if the cache can accurately predict which items are likely to be needed in the future.</p> <h5 id="disadvantage-s-refresh-ahead"><span id="disadvantage-s-refresh-ahead" class="anchor"></span>Disadvantage(s): refresh-ahead<a href="#disadvantage-s-refresh-ahead" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <ul><li>Not accurately predicting which items are likely to be needed in the future can result in reduced performance than without refresh-ahead.</li></ul> <h3 id="disadvantage-s-cache"><span id="disadvantage-s-cache" class="anchor"></span>Disadvantage(s): cache<a href="#disadvantage-s-cache" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Need to maintain consistency between caches and the source of truth such as the database through <a href="https://en.wikipedia.org/wiki/Cache_algorithms">cache invalidation</a>.</li> <li>Cache invalidation is a difficult problem, there is additional complexity associated with when to update the cache.</li> <li>Need to make application changes such as adding Redis or memcached.</li></ul> <h3 id="source-s-and-further-reading"><span id="source-s-and-further-reading" class="anchor"></span>Source(s) and further reading<a href="#source-s-and-further-reading" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><a href="http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast">From cache to in-memory data grid</a></li> <li><a href="http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html">Scalable system design patterns</a></li> <li><a href="http://lethain.com/introduction-to-architecting-systems-for-scale/">Introduction to architecting systems for scale</a></li> <li><a href="http://www.slideshare.net/jboner/scalability-availability-stability-patterns/">Scalability, availability, stability, patterns</a></li> <li><a href="http://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache">Scalability</a></li> <li><a href="http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Strategies.html">AWS ElastiCache strategies</a></li> <li><a href="https://en.wikipedia.org/wiki/Cache_(computing)">Wikipedia</a></li></ul> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88><a class="navbar-brand page-nav-title" href="#" data-v-e8c82f88>Chapters of This Page</a> <nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-e8c82f88><a class="nav-link py-1" href="#cache" data-v-e8c82f88>Cache‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap" data-v-e8c82f88><a class="nav-link py-1" href="#client-caching" data-v-e8c82f88>Client caching‎</a> <a class="nav-link py-1" href="#cdn-caching" data-v-e8c82f88>CDN caching‎</a> <a class="nav-link py-1" href="#web-server-caching" data-v-e8c82f88>Web server caching‎</a> <a class="nav-link py-1" href="#database-caching" data-v-e8c82f88>Database caching‎</a> <a class="nav-link py-1" href="#application-caching" data-v-e8c82f88>Application caching‎</a> <a class="nav-link py-1" href="#caching-at-the-database-query-level" data-v-e8c82f88>Caching at the database query level‎</a> <a class="nav-link py-1" href="#caching-at-the-object-level" data-v-e8c82f88>Caching at the object level‎</a> <a class="nav-link py-1" href="#when-to-update-the-cache" data-v-e8c82f88>When to update the cache‎</a> <a class="nav-link py-1" href="#disadvantage-s-cache" data-v-e8c82f88>Disadvantage(s): cache‎</a> <a class="nav-link py-1" href="#source-s-and-further-reading" data-v-e8c82f88>Source(s) and further reading‎</a></nav> <!----></nav></div> <!----></nav></div> <footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 3.1.1</a>]</small></div></footer></div>
</body><script src="../markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
